Ext.define("Ext.dom.AbstractElement_insertion",{override:"Ext.dom.AbstractElement",appendChild:function(el,returnDom){var me=this,insertEl,eLen,e,oldUseDom;if(el.nodeType||el.dom||typeof el=="string"){el=Ext.getDom(el);me.dom.appendChild(el);return!returnDom?Ext.get(el):el}else if(el.length){insertEl=Ext.fly(document.createDocumentFragment(),"_internal");eLen=el.length;Ext.DomHelper.useDom=true;for(e=0;e<eLen;e++){insertEl.appendChild(el[e],returnDom)}Ext.DomHelper.useDom=oldUseDom;me.dom.appendChild(insertEl.dom);return returnDom?insertEl.dom:insertEl}else{return me.createChild(el,null,returnDom)}},appendTo:function(el){Ext.getDom(el).appendChild(this.dom);return this},insertBefore:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el);return this},insertAfter:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el.nextSibling);return this},insertFirst:function(el,returnDom){el=el||{};if(el.nodeType||el.dom||typeof el=="string"){el=Ext.getDom(el);this.dom.insertBefore(el,this.dom.firstChild);return!returnDom?Ext.get(el):el}else{return this.createChild(el,this.dom.firstChild,returnDom)}},insertSibling:function(el,where,returnDom){var me=this,DomHelper=Ext.core.DomHelper,oldUseDom=DomHelper.useDom,isAfter=(where||"before").toLowerCase()=="after",rt,insertEl,eLen,e;if(Ext.isArray(el)){insertEl=Ext.fly(document.createDocumentFragment(),"_internal");eLen=el.length;DomHelper.useDom=true;for(e=0;e<eLen;e++){rt=insertEl.appendChild(el[e],returnDom)}DomHelper.useDom=oldUseDom;me.dom.parentNode.insertBefore(insertEl.dom,isAfter?me.dom.nextSibling:me.dom);return rt}el=el||{};if(el.nodeType||el.dom){rt=me.dom.parentNode.insertBefore(Ext.getDom(el),isAfter?me.dom.nextSibling:me.dom);if(!returnDom){rt=Ext.get(rt)}}else{if(isAfter&&!me.dom.nextSibling){rt=DomHelper.append(me.dom.parentNode,el,!returnDom)}else{rt=DomHelper[isAfter?"insertAfter":"insertBefore"](me.dom,el,!returnDom)}}return rt},replace:function(el){el=Ext.get(el);this.insertBefore(el);el.remove();return this},replaceWith:function(el){var me=this;if(el.nodeType||el.dom||typeof el=="string"){el=Ext.get(el);me.dom.parentNode.insertBefore(el.dom,me.dom)}else{el=Ext.core.DomHelper.insertBefore(me.dom,el)}delete Ext.cache[me.id];Ext.removeNode(me.dom);me.id=Ext.id(me.dom=el);Ext.dom.AbstractElement.addToCache(me.isFlyweight?new Ext.dom.AbstractElement(me.dom):me);return me},createChild:function(config,insertBefore,returnDom){config=config||{tag:"div"};if(insertBefore){return Ext.core.DomHelper.insertBefore(insertBefore,config,returnDom!==true)}else{return Ext.core.DomHelper.append(this.dom,config,returnDom!==true)}},wrap:function(config,returnDom,selector){var newEl=Ext.core.DomHelper.insertBefore(this.dom,config||{tag:"div"},true),target=newEl;if(selector){target=Ext.DomQuery.selectNode(selector,newEl.dom)}target.appendChild(this.dom);return returnDom?newEl.dom:newEl},insertHtml:function(where,html,returnEl){var el=Ext.core.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el}});
Ext.define("Ext.dom.AbstractHelper",{emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,styleSepRe:/\s*(?::|;)\s*/,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},decamelizeName:function(){var camelCaseRe=/([a-z])([A-Z])/g,cache={};function decamel(match,p1,p2){return p1+"-"+p2.toLowerCase()}return function(s){return cache[s]||(cache[s]=s.replace(camelCaseRe,decamel))}}(),generateMarkup:function(spec,buffer){var me=this,specType=typeof spec,attr,val,tag,i,closeTags;if(specType=="string"||specType=="number"){buffer.push(spec)}else if(Ext.isArray(spec)){for(i=0;i<spec.length;i++){if(spec[i]){me.generateMarkup(spec[i],buffer)}}}else{tag=spec.tag||"div";buffer.push("<",tag);for(attr in spec){if(spec.hasOwnProperty(attr)){val=spec[attr];if(!me.confRe.test(attr)){if(typeof val=="object"){buffer.push(" ",attr,'="');me.generateStyles(val,buffer).push('"')}else{buffer.push(" ",me.attributeTransform[attr]||attr,'="',val,'"')}}}}if(me.emptyTags.test(tag)){buffer.push("/>")}else{buffer.push(">");if(val=spec.tpl){val.applyOut(spec.tplData,buffer)}if(val=spec.html){buffer.push(val)}if(val=spec.cn||spec.children){me.generateMarkup(val,buffer)}closeTags=me.closeTags;buffer.push(closeTags[tag]||(closeTags[tag]="</"+tag+">"))}}return buffer},generateStyles:function(styles,buffer){var a=buffer||[],name;for(name in styles){if(styles.hasOwnProperty(name)){a.push(this.decamelizeName(name),":",styles[name],";")}}return buffer||a.join("")},markup:function(spec){if(typeof spec=="string"){return spec}var buf=this.generateMarkup(spec,[]);return buf.join("")},applyStyles:function(el,styles){if(styles){var i=0,len;el=Ext.fly(el,"_applyStyles");if(typeof styles=="function"){styles=styles.call()}if(typeof styles=="string"){styles=Ext.util.Format.trim(styles).split(this.styleSepRe);for(len=styles.length;i<len;){el.setStyle(styles[i++],styles[i++])}}else if(Ext.isObject(styles)){el.setStyle(styles)}}},insertHtml:function(where,el,html){var hash={},setStart,range,frag,rangeEl;where=where.toLowerCase();hash["beforebegin"]=["BeforeBegin","previousSibling"];hash["afterend"]=["AfterEnd","nextSibling"];range=el.ownerDocument.createRange();setStart="setStart"+(this.endRe.test(where)?"After":"Before");if(hash[where]){range[setStart](el);frag=range.createContextualFragment(html);el.parentNode.insertBefore(frag,where=="beforebegin"?el:el.nextSibling);return el[(where=="beforebegin"?"previous":"next")+"Sibling"]}else{rangeEl=(where=="afterbegin"?"first":"last")+"Child";if(el.firstChild){range[setStart](el[rangeEl]);frag=range.createContextualFragment(html);if(where=="afterbegin"){el.insertBefore(frag,el.firstChild)}else{el.appendChild(frag)}}else{el.innerHTML=html}return el[rangeEl]}throw'Illegal insertion point -> "'+where+'"'},insertBefore:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforebegin")},insertAfter:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterend","nextSibling")},insertFirst:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterbegin","firstChild")},append:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforeend","",true)},overwrite:function(el,o,returnElement){el=Ext.getDom(el);el.innerHTML=this.markup(o);return returnElement?Ext.get(el.firstChild):el.firstChild},doInsert:function(el,o,returnElement,pos,sibling,append){var newNode=this.insertHtml(pos,Ext.getDom(el),this.markup(o));return returnElement?Ext.get(newNode,true):newNode}});
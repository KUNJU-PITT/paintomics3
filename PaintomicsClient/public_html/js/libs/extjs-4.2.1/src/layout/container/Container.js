Ext.define("Ext.layout.container.Container",{alias:["layout.container"],extend:"Ext.layout.Layout",alternateClassName:"Ext.layout.ContainerLayout",mixins:{elementCt:"Ext.util.ElementContainer"},requires:["Ext.XTemplate"],type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,childEls:["overflowPadderEl"],renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){this.callParent(arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent();this.mixins.elementCt.destroy.call(this)},beginLayout:function(ownerContext){this.callParent(arguments);ownerContext.targetContext=ownerContext.paddingContext=ownerContext.getEl("getTarget",this);this.cacheChildItems(ownerContext)},beginLayoutCycle:function(ownerContext,firstCycle){var me=this;me.callParent(arguments);if(firstCycle){if(me.usesContainerHeight){++ownerContext.consumersContainerHeight}if(me.usesContainerWidth){++ownerContext.consumersContainerWidth}}},cacheChildItems:function(ownerContext){var context=ownerContext.context,childItems=[],items=this.getVisibleItems(),length=items.length,i;ownerContext.childItems=childItems;ownerContext.visibleItems=items;for(i=0;i<length;++i){childItems.push(context.getCmp(items[i]))}},cacheElements:function(){var owner=this.owner;this.applyChildEls(owner.el,owner.id)},configureItem:function(item){var me=this,itemCls=me.itemCls,ownerItemCls=me.owner.itemCls,addClasses;item.ownerLayout=me;if(itemCls){addClasses=typeof itemCls==="string"?[itemCls]:itemCls}if(ownerItemCls){addClasses=Ext.Array.push(addClasses||[],ownerItemCls)}if(addClasses){item.addCls(addClasses)}},doRenderBody:function(out,renderData){this.renderItems(out,renderData);this.renderContent(out,renderData)},doRenderContainer:function(out,renderData){var me=renderData.$comp.layout,tpl=me.getRenderTpl(),data=me.getRenderData();tpl.applyOut(data,out)},doRenderItems:function(out,renderData){var me=renderData.$layout,tree=me.getRenderTree();if(tree){Ext.DomHelper.generateMarkup(tree,out)}},finishRender:function(){var me=this,target,items;me.callParent();me.cacheElements();target=me.getRenderTarget();items=me.getLayoutItems();if(me.targetCls&&!me.getTarget().hasCls(me.targetCls)){Ext.log.warn("targetCls is missing. This may mean that getTargetEl() is being overridden but not applyTargetCls(). "+me.owner.id)}me.finishRenderItems(target,items)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(ownerContext,inDom){var targetContext=ownerContext.targetContext,frameInfo=targetContext.getFrameInfo(),padding=ownerContext.paddingContext.getPaddingInfo(),got=0,needed=0,gotWidth,gotHeight,width,height;if(!ownerContext.widthModel.shrinkWrap){++needed;width=inDom?targetContext.getDomProp("width"):targetContext.getProp("width");gotWidth=typeof width=="number";if(gotWidth){++got;width-=frameInfo.width+padding.width;if(width<0){width=0}}}if(!ownerContext.heightModel.shrinkWrap){++needed;height=inDom?targetContext.getDomProp("height"):targetContext.getProp("height");gotHeight=typeof height=="number";if(gotHeight){++got;height-=frameInfo.height+padding.height;if(height<0){height=0}}}return{width:width,height:height,needed:needed,got:got,gotAll:got==needed,gotWidth:gotWidth,gotHeight:gotHeight}},getPositionOffset:function(position){if(!this.createsInnerCt){var offset=this.owner.itemNodeOffset;if(offset){position+=offset}}return position},getLayoutItems:function(){var owner=this.owner,items=owner&&owner.items;return items&&items.items||[]},getRenderData:function(){var comp=this.owner;return{$comp:comp,$layout:this,ownerId:comp.id}},getRenderedItems:function(){var me=this,target=me.getRenderTarget(),items=me.getLayoutItems(),ln=items.length,renderedItems=[],i,item;for(i=0;i<ln;i++){item=items[i];if(item.rendered&&me.isValidParent(item,target,i)){renderedItems.push(item)}}return renderedItems},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var me=this,renderTpl=Ext.XTemplate.getTpl(this,"renderTpl");if(!renderTpl.renderContent){me.owner.setupRenderTpl(renderTpl)}return renderTpl},getRenderTree:function(){var result,items=this.owner.items,itemsGen,renderCfgs={};do{itemsGen=items.generation;result=this.getItemsRenderTree(this.getLayoutItems(),renderCfgs)}while(items.generation!==itemsGen);return result},renderChildren:function(){var me=this,ownerItems=me.owner.items,target=me.getRenderTarget(),itemsGen,items;do{itemsGen=ownerItems.generation;items=me.getLayoutItems();me.renderItems(items,target)}while(ownerItems.generation!==itemsGen)},getScrollbarsNeeded:function(width,height,contentWidth,contentHeight){var scrollbarSize=Ext.getScrollbarSize(),hasWidth=typeof width=="number",hasHeight=typeof height=="number",needHorz=0,needVert=0;if(!scrollbarSize.width){return 0}if(hasHeight&&height<contentHeight){needVert=2;width-=scrollbarSize.width}if(hasWidth&&width<contentWidth){needHorz=1;if(!needVert&&hasHeight){height-=scrollbarSize.height;if(height<contentHeight){needVert=2}}}return needVert+needHorz},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var target=this.getRenderTarget(),items=this.getLayoutItems(),ln=items.length,visibleItems=[],i,item;for(i=0;i<ln;i++){item=items[i];if(item.rendered&&this.isValidParent(item,target,i)&&item.hidden!==true){visibleItems.push(item)}}return visibleItems},setupRenderTpl:function(renderTpl){var me=this;renderTpl.renderBody=me.doRenderBody;renderTpl.renderContainer=me.doRenderContainer;renderTpl.renderItems=me.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()}});
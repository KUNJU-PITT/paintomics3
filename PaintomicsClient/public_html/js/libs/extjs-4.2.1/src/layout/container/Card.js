Ext.define("Ext.layout.container.Card",{extend:"Ext.layout.container.Fit",alternateClassName:"Ext.layout.CardLayout",alias:"layout.card",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var me=this,activeItem=me.getActiveItem();if(activeItem){if(activeItem.hasListeners.beforeactivate&&activeItem.fireEvent("beforeactivate",activeItem)===false){activeItem=me.activeItem=me.owner.activeItem=null}else if(activeItem.hasListeners.activate){activeItem.on({boxready:function(){activeItem.fireEvent("activate",activeItem)},single:true})}if(me.deferredRender){if(activeItem){return me.getItemsRenderTree([activeItem])}}else{return me.callParent(arguments)}}},renderChildren:function(){var me=this,active=me.getActiveItem();if(!me.deferredRender){me.callParent()}else if(active){me.renderItems([active],me.getRenderTarget())}},isValidParent:function(item,target,position){var itemEl=item.el?item.el.dom:Ext.getDom(item);return itemEl&&itemEl.parentNode===(target.dom||target)||false},getActiveItem:function(){var me=this,result=me.parseActiveItem(me.activeItem||me.owner&&me.owner.activeItem);if(result&&me.owner.items.indexOf(result)!=-1){me.activeItem=result}else{me.activeItem=null}return me.activeItem},parseActiveItem:function(item){if(item&&item.isComponent){return item}else if(typeof item=="number"||item===undefined){return this.getLayoutItems()[item||0]}else{return this.owner.getComponent(item)}},configureItem:function(item){if(item===this.getActiveItem()){item.hidden=false}else{item.hidden=true}this.callParent(arguments)},onRemove:function(component){var me=this;if(component===me.activeItem){me.activeItem=null}},getAnimation:function(newCard,owner){var newAnim=(newCard||{}).cardSwitchAnimation;if(newAnim===false){return false}return newAnim||owner.cardSwitchAnimation},getNext:function(){var wrap=arguments[0],items=this.getLayoutItems(),index=Ext.Array.indexOf(items,this.activeItem);return items[index+1]||(wrap?items[0]:false)},next:function(){var anim=arguments[0],wrap=arguments[1];return this.setActiveItem(this.getNext(wrap),anim)},getPrev:function(){var wrap=arguments[0],items=this.getLayoutItems(),index=Ext.Array.indexOf(items,this.activeItem);return items[index-1]||(wrap?items[items.length-1]:false)},prev:function(){var anim=arguments[0],wrap=arguments[1];return this.setActiveItem(this.getPrev(wrap),anim)},setActiveItem:function(newCard){var me=this,owner=me.owner,oldCard=me.activeItem,rendered=owner.rendered,newIndex;newCard=me.parseActiveItem(newCard);newIndex=owner.items.indexOf(newCard);if(newIndex==-1){newIndex=owner.items.items.length;Ext.suspendLayouts();newCard=owner.add(newCard);Ext.resumeLayouts()}if(newCard&&oldCard!=newCard){if(newCard.fireEvent("beforeactivate",newCard,oldCard)===false){return false}if(oldCard&&oldCard.fireEvent("beforedeactivate",oldCard,newCard)===false){return false}if(rendered){Ext.suspendLayouts();if(!newCard.rendered){me.renderItem(newCard,me.getRenderTarget(),owner.items.length)}if(oldCard){if(me.hideInactive){oldCard.hide();oldCard.hiddenByLayout=true}oldCard.fireEvent("deactivate",oldCard,newCard)}if(newCard.hidden){newCard.show()}if(!newCard.hidden){me.activeItem=newCard}Ext.resumeLayouts(true)}else{me.activeItem=newCard}newCard.fireEvent("activate",newCard,oldCard);return me.activeItem}return false}});
Ext.define("Ext.layout.component.Dock",{extend:"Ext.layout.component.Component",alias:"layout.dock",alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var me=this,target,items;me.callParent();target=me.getRenderTarget();items=me.getDockedItems();me.finishRenderItems(target,items)},isItemBoxParent:function(itemContext){return true},isItemShrinkWrap:function(item){return true},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},handleItemBorders:function(){var me=this,owner=me.owner,borders,docked,lastItems=me.lastDockedItems,oldBorders=me.borders,currentGeneration=owner.dockedItems.generation,noBorderClassesSides=me.noBorderClassesSides,borderWidthProps=me.borderWidthProps,i,ln,item,dock,side,collapsed=me.collapsed;if(me.initializedBorders==currentGeneration||owner.border&&!owner.manageBodyBorders){return}me.initializedBorders=currentGeneration;me.collapsed=false;me.lastDockedItems=docked=me.getLayoutItems();me.collapsed=collapsed;borders={top:[],right:[],bottom:[],left:[]};for(i=0,ln=docked.length;i<ln;i++){item=docked[i];dock=item.dock;if(item.ignoreBorderManagement){continue}if(!borders[dock].satisfied){borders[dock].push(item);borders[dock].satisfied=true}if(!borders.top.satisfied&&dock!=="bottom"){borders.top.push(item)}if(!borders.right.satisfied&&dock!=="left"){borders.right.push(item)}if(!borders.bottom.satisfied&&dock!=="top"){borders.bottom.push(item)}if(!borders.left.satisfied&&dock!=="right"){borders.left.push(item)}}if(lastItems){for(i=0,ln=lastItems.length;i<ln;i++){item=lastItems[i];if(!item.isDestroyed&&!item.ignoreBorderManagement&&!owner.manageBodyBorders){item.removeCls(me.noBorderClasses)}}}if(oldBorders){for(side in oldBorders){if(owner.manageBodyBorders&&oldBorders[side].satisfied){owner.setBodyStyle(borderWidthProps[side],"")}}}for(side in borders){ln=borders[side].length;if(!owner.manageBodyBorders){for(i=0;i<ln;i++){borders[side][i].addCls(noBorderClassesSides[side])}if(!borders[side].satisfied&&!owner.bodyBorder||owner.bodyBorder===false){owner.addBodyCls(noBorderClassesSides[side])}}else if(borders[side].satisfied){owner.setBodyStyle(borderWidthProps[side],"1px")}}me.borders=borders},beforeLayoutCycle:function(ownerContext){var me=this,owner=me.owner,shrinkWrap=me.sizeModels.shrinkWrap,shrinkWrapDock=owner.shrinkWrapDock,collapsedHorz,collapsedVert;if(owner.collapsed){if(owner.collapsedVertical()){collapsedVert=true;ownerContext.measureDimensions=1}else{collapsedHorz=true;ownerContext.measureDimensions=2}}ownerContext.collapsedVert=collapsedVert;ownerContext.collapsedHorz=collapsedHorz;if(collapsedVert){ownerContext.heightModel=shrinkWrap}else if(collapsedHorz){ownerContext.widthModel=shrinkWrap}shrinkWrapDock=shrinkWrapDock===true?3:shrinkWrapDock||0;ownerContext.shrinkWrapDockHeight=shrinkWrapDock&1&&ownerContext.heightModel.shrinkWrap;ownerContext.shrinkWrapDockWidth=shrinkWrapDock&2&&ownerContext.widthModel.shrinkWrap},beginLayout:function(ownerContext){var me=this,owner=me.owner,docked=me.getLayoutItems(),layoutContext=ownerContext.context,dockedItemCount=docked.length,dockedItems,i,item,itemContext,offsets,collapsed,dock;me.callParent(arguments);collapsed=owner.getCollapsed();if(collapsed!==me.lastCollapsedState&&Ext.isDefined(me.lastCollapsedState)){if(me.owner.collapsed){ownerContext.isCollapsingOrExpanding=1;owner.addClsWithUI(owner.collapsedCls)}else{ownerContext.isCollapsingOrExpanding=2;owner.removeClsWithUI(owner.collapsedCls);ownerContext.lastCollapsedState=me.lastCollapsedState}}me.lastCollapsedState=collapsed;ownerContext.dockedItems=dockedItems=[];for(i=0;i<dockedItemCount;i++){item=docked[i];if(item.rendered){dock=item.dock;itemContext=layoutContext.getCmp(item);itemContext.dockedAt={x:0,y:0};itemContext.offsets=offsets=Ext.Element.parseBox(item.offsets||0);itemContext.horizontal=dock=="top"||dock=="bottom";offsets.width=offsets.left+offsets.right;offsets.height=offsets.top+offsets.bottom;dockedItems.push(itemContext)}}ownerContext.bodyContext=ownerContext.getEl("body")},beginLayoutCycle:function(ownerContext){var me=this,docked=ownerContext.dockedItems,len=docked.length,owner=me.owner,frameBody=owner.frameBody,lastHeightModel=me.lastHeightModel,i,item,dock;me.callParent(arguments);if(me.owner.manageHeight){if(me.lastBodyDisplay){owner.body.dom.style.display=me.lastBodyDisplay=""}}else{if(me.lastBodyDisplay!=="inline-block"){owner.body.dom.style.display=me.lastBodyDisplay="inline-block"}if(lastHeightModel&&lastHeightModel.shrinkWrap&&!ownerContext.heightModel.shrinkWrap){owner.body.dom.style.marginBottom=""}}if(ownerContext.widthModel.auto){if(ownerContext.widthModel.shrinkWrap){owner.el.setWidth(null)}owner.body.setWidth(null);if(frameBody){frameBody.setWidth(null)}}if(ownerContext.heightModel.auto){owner.body.setHeight(null);if(frameBody){frameBody.setHeight(null)}}if(ownerContext.collapsedVert){ownerContext.setContentHeight(0)}else if(ownerContext.collapsedHorz){ownerContext.setContentWidth(0)}for(i=0;i<len;i++){item=docked[i].target;dock=item.dock;if(dock=="right"){item.setLocalX(0)}else if(dock!="left"){continue}}},calculate:function(ownerContext){var me=this,measure=me.measureAutoDimensions(ownerContext,ownerContext.measureDimensions),state=ownerContext.state,horzDone=state.horzDone,vertDone=state.vertDone,bodyContext=ownerContext.bodyContext,framing,horz,vert,forward,backward;ownerContext.borderInfo||ownerContext.getBorderInfo();ownerContext.paddingInfo||ownerContext.getPaddingInfo();ownerContext.frameInfo||ownerContext.getFrameInfo();bodyContext.borderInfo||bodyContext.getBorderInfo();bodyContext.paddingInfo||bodyContext.getPaddingInfo();if(!ownerContext.frameBorder){if(!(framing=ownerContext.framing)){ownerContext.frameBorder=ownerContext.borderInfo;ownerContext.framePadding=ownerContext.paddingInfo}else{ownerContext.frameBorder=framing.border;ownerContext.framePadding=framing.padding}}horz=!horzDone&&me.createAxis(ownerContext,measure.contentWidth,ownerContext.widthModel,me.horzAxisProps,ownerContext.collapsedHorz);vert=!vertDone&&me.createAxis(ownerContext,measure.contentHeight,ownerContext.heightModel,me.vertAxisProps,ownerContext.collapsedVert);for(forward=0,backward=ownerContext.dockedItems.length;backward--;++forward){if(horz){me.dockChild(ownerContext,horz,backward,forward)}if(vert){me.dockChild(ownerContext,vert,backward,forward)}}if(horz&&me.finishAxis(ownerContext,horz)){state.horzDone=horzDone=horz}if(vert&&me.finishAxis(ownerContext,vert)){state.vertDone=vertDone=vert}if(horzDone&&vertDone&&me.finishConstraints(ownerContext,horzDone,vertDone)){me.finishPositions(ownerContext,horzDone,vertDone)}else{me.done=false}},createAxis:function(ownerContext,contentSize,sizeModel,axisProps,collapsedAxis){var me=this,begin=0,owner=me.owner,maxSize=owner[axisProps.maxSize],minSize=owner[axisProps.minSize]||0,dockBegin=axisProps.dockBegin,dockEnd=axisProps.dockEnd,posProp=axisProps.pos,sizeProp=axisProps.size,hasMaxSize=maxSize!=null,shrinkWrap=sizeModel.shrinkWrap,bodyContext,framing,padding,end;if(shrinkWrap){if(collapsedAxis){end=0}else{bodyContext=ownerContext.bodyContext;end=contentSize+bodyContext.borderInfo[sizeProp]}}else{framing=ownerContext.frameBorder;padding=ownerContext.framePadding;begin=framing[dockBegin]+padding[dockBegin];end=ownerContext.getProp(sizeProp)-(framing[dockEnd]+padding[dockEnd])}return{shrinkWrap:sizeModel.shrinkWrap,sizeModel:sizeModel,initialBegin:begin,begin:begin,end:end,collapsed:collapsedAxis,horizontal:axisProps.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:end-begin,maxChildSize:0,hasMinMaxConstraints:(minSize||hasMaxSize)&&sizeModel.shrinkWrap,minSize:minSize,maxSize:hasMaxSize?maxSize:1e9,bodyPosProp:me.owner.manageHeight?posProp:axisProps.marginBegin,dockBegin:dockBegin,dockEnd:dockEnd,posProp:posProp,sizeProp:sizeProp,setSize:axisProps.setSize,shrinkWrapDock:ownerContext[axisProps.shrinkWrapDock],sizeModelName:axisProps.sizeModel,dockedPixelsEnd:0}},dockChild:function(ownerContext,axis,backward,forward){var me=this,itemContext=ownerContext.dockedItems[axis.shrinkWrap?backward:forward],item=itemContext.target,dock=item.dock,sizeProp=axis.sizeProp,pos,size;if(item.ignoreParentFrame&&ownerContext.isCollapsingOrExpanding){itemContext.clearMarginCache()}itemContext.marginInfo||itemContext.getMarginInfo();if(dock==axis.dockBegin){if(axis.shrinkWrap){pos=me.dockOutwardBegin(ownerContext,itemContext,item,axis)}else{pos=me.dockInwardBegin(ownerContext,itemContext,item,axis)}}else if(dock==axis.dockEnd){if(axis.shrinkWrap){pos=me.dockOutwardEnd(ownerContext,itemContext,item,axis)}else{pos=me.dockInwardEnd(ownerContext,itemContext,item,axis)}}else{if(axis.shrinkWrapDock){size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp];axis.maxChildSize=Math.max(axis.maxChildSize,size);pos=0}else{pos=me.dockStretch(ownerContext,itemContext,item,axis)}}itemContext.dockedAt[axis.posProp]=pos},dockInwardBegin:function(ownerContext,itemContext,item,axis){var pos=axis.begin,sizeProp=axis.sizeProp,ignoreParentFrame=item.ignoreParentFrame,delta,size,dock;if(ignoreParentFrame){axis.ignoreFrameBegin=itemContext;dock=item.dock;delta=ownerContext.frameBorder[dock];pos-=delta+ownerContext.framePadding[dock]}if(!item.overlay){size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp];axis.begin+=size;if(ignoreParentFrame){axis.begin-=delta}}return pos},dockInwardEnd:function(ownerContext,itemContext,item,axis){var sizeProp=axis.sizeProp,size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],pos=axis.end-size,frameEnd;if(!item.overlay){axis.end=pos}if(item.ignoreParentFrame){axis.ignoreFrameEnd=itemContext;frameEnd=ownerContext.frameBorder[item.dock];pos+=frameEnd+ownerContext.framePadding[item.dock];axis.end+=frameEnd}return pos},dockOutwardBegin:function(ownerContext,itemContext,item,axis){var pos=axis.begin,sizeProp=axis.sizeProp,size;if(axis.collapsed){axis.ignoreFrameBegin=axis.ignoreFrameEnd=itemContext}else if(item.ignoreParentFrame){axis.ignoreFrameBegin=itemContext}if(!item.overlay){size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp];pos-=size;axis.begin=pos}return pos},dockOutwardEnd:function(ownerContext,itemContext,item,axis){var pos=axis.end,sizeProp=axis.sizeProp,size;size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp];if(axis.collapsed){axis.ignoreFrameBegin=axis.ignoreFrameEnd=itemContext}else if(item.ignoreParentFrame){axis.ignoreFrameEnd=itemContext}if(!item.overlay){axis.end=pos+size;axis.dockedPixelsEnd+=size}return pos},dockStretch:function(ownerContext,itemContext,item,axis){var dock=item.dock,sizeProp=axis.sizeProp,horizontal=dock=="top"||dock=="bottom",border=ownerContext.frameBorder,offsets=itemContext.offsets,padding=ownerContext.framePadding,endProp=horizontal?"right":"bottom",startProp=horizontal?"left":"top",pos=axis.begin+offsets[startProp],margin,size;if(item.stretch!==false){size=axis.end-pos-offsets[endProp];if(item.ignoreParentFrame){pos-=padding[startProp]+border[startProp];size+=padding[sizeProp]+border[sizeProp]}margin=itemContext.marginInfo;size-=margin[sizeProp];itemContext[axis.setSize](size)}return pos},finishAxis:function(ownerContext,axis){if(isNaN(axis.maxChildSize)){return false}var axisBegin=axis.begin,size=axis.end-axisBegin,collapsed=axis.collapsed,setSizeMethod=axis.setSize,beginName=axis.dockBegin,endName=axis.dockEnd,padding=ownerContext.framePadding,border=ownerContext.frameBorder,borderBegin=border[beginName],framing=ownerContext.framing,framingBegin=framing&&framing[beginName],paddingBegin=collapsed?0:padding[beginName],sizeProp=axis.sizeProp,ignoreFrameBegin=axis.ignoreFrameBegin,ignoreFrameEnd=axis.ignoreFrameEnd,bodyContext=ownerContext.bodyContext,extraPaddingBegin=Math.max(borderBegin+paddingBegin-framingBegin,0),bodyPos,bodySize,delta,dirty;if(axis.shrinkWrap){bodySize=axis.initialSize;if(framing){delta=-axisBegin+borderBegin+paddingBegin;bodyPos=delta-framingBegin-extraPaddingBegin}else{bodyPos=-axisBegin;delta=bodyPos+paddingBegin}if(!collapsed){size+=padding[sizeProp]}if(ignoreFrameBegin){delta-=borderBegin;bodyPos-=borderBegin;ignoreFrameBegin.dockedAt[axis.posProp]-=paddingBegin}else{size+=borderBegin}if(collapsed){}else if(ignoreFrameEnd){ignoreFrameEnd.dockedAt[axis.posProp]+=padding[endName]}else{size+=border[endName]}axis.size=size;if(!axis.horizontal&&!this.owner.manageHeight){dirty=false}}else{if(framing){delta=0;bodyPos=axisBegin-framingBegin-extraPaddingBegin}else{delta=-borderBegin;bodyPos=axisBegin-paddingBegin-borderBegin}bodySize=size}axis.delta=delta;bodyContext[setSizeMethod](bodySize,dirty);bodyContext.setProp(axis.bodyPosProp,bodyPos);return!isNaN(size)},beforeInvalidateShrinkWrapDock:function(itemContext,options){var sizeModelName=options.axis.sizeModelName;if(!itemContext[sizeModelName].constrainedMin){itemContext[sizeModelName]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(itemContext,options){var axis=options.axis,me=options.layout,pos;if(itemContext[axis.sizeModelName].calculated){pos=me.dockStretch(options.ownerContext,itemContext,itemContext.target,axis);itemContext.setProp(axis.posProp,axis.delta+pos)}},finishConstraints:function(ownerContext,horz,vert){var me=this,sizeModels=me.sizeModels,publishWidth=horz.shrinkWrap,publishHeight=vert.shrinkWrap,owner=me.owner,dirty,height,width,heightModel,widthModel,size,minSize,maxSize,maxChildSize,desiredSize;if(publishWidth){size=horz.size;minSize=horz.collapsed?0:horz.minSize;maxSize=horz.maxSize;maxChildSize=horz.maxChildSize;desiredSize=Math.max(size,maxChildSize);if(desiredSize>maxSize){widthModel=sizeModels.constrainedMax;width=maxSize}else if(desiredSize<minSize){widthModel=sizeModels.constrainedMin;width=minSize}else if(size<maxChildSize){widthModel=sizeModels.constrainedDock;owner.dockConstrainedWidth=width=maxChildSize}else{width=size}}if(publishHeight){size=vert.size;minSize=vert.collapsed?0:vert.minSize;maxSize=vert.maxSize;maxChildSize=vert.maxChildSize;desiredSize=Math.max(size,maxChildSize+size-vert.initialSize);if(desiredSize>maxSize){heightModel=sizeModels.constrainedMax;height=maxSize}else if(desiredSize<minSize){heightModel=sizeModels.constrainedMin;height=minSize}else if(size<maxChildSize){heightModel=sizeModels.constrainedDock;owner.dockConstrainedHeight=height=maxChildSize}else{if(!ownerContext.collapsedVert&&!owner.manageHeight){dirty=false;ownerContext.bodyContext.setProp("margin-bottom",vert.dockedPixelsEnd)}height=size}}if(widthModel||heightModel){if(widthModel&&heightModel&&widthModel.constrainedMax&&heightModel.constrainedByMin){ownerContext.invalidate({widthModel:widthModel});return false}if(!ownerContext.widthModel.calculatedFromShrinkWrap&&!ownerContext.heightModel.calculatedFromShrinkWrap){ownerContext.invalidate({widthModel:widthModel,heightModel:heightModel});return false}}else{me.invalidateAxes(ownerContext,horz,vert)}if(publishWidth){ownerContext.setWidth(width);if(widthModel){ownerContext.widthModel=widthModel}}if(publishHeight){ownerContext.setHeight(height,dirty);if(heightModel){ownerContext.heightModel=heightModel}}return true},invalidateAxes:function(ownerContext,horz,vert){var before=this.beforeInvalidateShrinkWrapDock,after=this.afterInvalidateShrinkWrapDock,horzSize=horz.end-horz.begin,vertSize=vert.initialSize,invalidateHorz=horz.shrinkWrapDock&&horz.maxChildSize<horzSize,invalidateVert=vert.shrinkWrapDock&&vert.maxChildSize<vertSize,dockedItems,len,i,itemContext,itemSize,isHorz,axis,sizeProp;if(invalidateHorz||invalidateVert){if(invalidateVert){vert.begin=vert.initialBegin;vert.end=vert.begin+vert.initialSize}dockedItems=ownerContext.dockedItems;for(i=0,len=dockedItems.length;i<len;++i){itemContext=dockedItems[i];isHorz=itemContext.horizontal;axis=null;if(invalidateHorz&&isHorz){sizeProp=horz.sizeProp;itemSize=horzSize;axis=horz}else if(invalidateVert&&!isHorz){sizeProp=vert.sizeProp;itemSize=vertSize;axis=vert}if(axis){itemSize-=itemContext.getMarginInfo()[sizeProp];if(itemSize!==itemContext.props[sizeProp]){itemContext.invalidate({before:before,after:after,axis:axis,ownerContext:ownerContext,layout:this})}}}}},finishPositions:function(ownerContext,horz,vert){var dockedItems=ownerContext.dockedItems,length=dockedItems.length,deltaX=horz.delta,deltaY=vert.delta,index,itemContext;for(index=0;index<length;++index){itemContext=dockedItems[index];itemContext.setProp("x",deltaX+itemContext.dockedAt.x);itemContext.setProp("y",deltaY+itemContext.dockedAt.y)}},finishedLayout:function(ownerContext){var me=this,target=ownerContext.target;me.callParent(arguments);if(!ownerContext.animatePolicy){if(ownerContext.isCollapsingOrExpanding===1){target.afterCollapse(false)}else if(ownerContext.isCollapsingOrExpanding===2){target.afterExpand(false)}}},getAnimatePolicy:function(ownerContext){var me=this,lastCollapsedState,policy;if(ownerContext.isCollapsingOrExpanding==1){lastCollapsedState=me.lastCollapsedState}else if(ownerContext.isCollapsingOrExpanding==2){lastCollapsedState=ownerContext.lastCollapsedState}if(lastCollapsedState=="left"||lastCollapsedState=="right"){policy=me.horizontalCollapsePolicy}else if(lastCollapsedState=="top"||lastCollapsedState=="bottom"){policy=me.verticalCollapsePolicy}return policy},getDockedItems:function(order,beforeBody){var me=this,renderedOnly=order==="visual",all=renderedOnly?Ext.ComponentQuery.query("[rendered]",me.owner.dockedItems.items):me.owner.dockedItems.items,sort=all&&all.length&&order!==false,renderOrder,dock,dockedItems,i,isBefore,length;if(beforeBody==null){dockedItems=sort&&!renderedOnly?all.slice():all}else{dockedItems=[];for(i=0,length=all.length;i<length;++i){dock=all[i].dock;isBefore=dock=="top"||dock=="left";if(beforeBody?isBefore:!isBefore){dockedItems.push(all[i])}}sort=sort&&dockedItems.length}if(sort){renderOrder=(order=order||"render")=="render";Ext.Array.sort(dockedItems,function(a,b){var aw,bw;if(renderOrder&&(aw=me.owner.dockOrder[a.dock])!==(bw=me.owner.dockOrder[b.dock])){if(!(aw+bw)){return aw-bw}}aw=me.getItemWeight(a,order);bw=me.getItemWeight(b,order);if(aw!==undefined&&bw!==undefined){return aw-bw}return 0})}return dockedItems||[]},getItemWeight:function(item,order){var weight=item.weight||this.owner.defaultDockWeights[item.dock];return weight[order]||weight},getLayoutItems:function(){var me=this,items,itemCount,item,i,result;if(me.owner.collapsed){result=me.owner.getCollapsedDockedItems()}else{items=me.getDockedItems("visual");itemCount=items.length;result=[];for(i=0;i<itemCount;i++){item=items[i];if(!item.hidden){result.push(item)}}}return result},measureContentWidth:function(ownerContext){var bodyContext=ownerContext.bodyContext;return bodyContext.el.getWidth()-bodyContext.getBorderInfo().width},measureContentHeight:function(ownerContext){var bodyContext=ownerContext.bodyContext;return bodyContext.el.getHeight()-bodyContext.getBorderInfo().height},redoLayout:function(ownerContext){var me=this,owner=me.owner;if(ownerContext.isCollapsingOrExpanding==1){if(owner.reExpander){owner.reExpander.el.show()}owner.addClsWithUI(owner.collapsedCls);ownerContext.redo(true)}else if(ownerContext.isCollapsingOrExpanding==2){owner.removeClsWithUI(owner.collapsedCls);ownerContext.bodyContext.redo()}},renderChildren:function(){var me=this,items=me.getDockedItems(),target=me.getRenderTarget();me.handleItemBorders();me.renderItems(items,target)},renderItems:function(items,target){var me=this,dockedItemCount=items.length,itemIndex=0,correctPosition=0,staticNodeCount=0,targetNodes=me.getRenderTarget().dom.childNodes,targetChildCount=targetNodes.length,i,j,targetChildNode,item;for(i=0,j=0;i<targetChildCount;i++){targetChildNode=targetNodes[i];if(Ext.fly(targetChildNode).hasCls(Ext.baseCSSPrefix+"resizable-handle")){break}for(j=0;j<dockedItemCount;j++){item=items[j];if(item.rendered&&item.el.dom===targetChildNode){break}}if(j===dockedItemCount){staticNodeCount++}}for(;itemIndex<dockedItemCount;itemIndex++,correctPosition++){item=items[itemIndex];if(itemIndex===correctPosition&&(item.dock==="right"||item.dock==="bottom")){correctPosition+=staticNodeCount}if(item&&!item.rendered){me.renderItem(item,target,correctPosition)}else if(!me.isValidParent(item,target,correctPosition)){me.moveItem(item,target,correctPosition)}}},undoLayout:function(ownerContext){var me=this,owner=me.owner;if(ownerContext.isCollapsingOrExpanding==1){if(owner.reExpander){owner.reExpander.el.hide()}owner.removeClsWithUI(owner.collapsedCls);ownerContext.undo(true)}else if(ownerContext.isCollapsingOrExpanding==2){owner.addClsWithUI(owner.collapsedCls);ownerContext.bodyContext.undo()}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(item,ownerSizeModel){var me=this,policy=me.sizePolicy,shrinkWrapDock=me.owner.shrinkWrapDock,dock,vertical;if(item.stretch===false){return policy.nostretch}dock=item.dock;vertical=dock=="left"||dock=="right";shrinkWrapDock=shrinkWrapDock===true?3:shrinkWrapDock||0;if(vertical){policy=policy.vert;shrinkWrapDock=shrinkWrapDock&1}else{policy=policy.horz;shrinkWrapDock=shrinkWrapDock&2}if(shrinkWrapDock){if(!ownerSizeModel){ownerSizeModel=me.owner.getSizeModel()}if(ownerSizeModel[vertical?"height":"width"].shrinkWrap){return policy.shrinkWrap}}return policy.stretch},configureItem:function(item,pos){this.callParent(arguments);item.addCls(Ext.baseCSSPrefix+"docked");item.addClsWithUI(this.getDockCls(item.dock))},getDockCls:function(dock){return"docked-"+dock},afterRemove:function(item){this.callParent(arguments);if(this.itemCls){item.el.removeCls(this.itemCls+"-"+item.dock)}var dom=item.el.dom;if(!item.destroying&&dom){dom.parentNode.removeChild(dom)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var me=this,map=me.borderCollapseMap,owner=me.owner,baseCls=owner.baseCls,ui=owner.ui,table;map=map[baseCls]||(map[baseCls]={});table=map[ui];if(!table){baseCls+="-"+ui+"-outer-border-";map[ui]=table=[0,baseCls+"l",baseCls+"b",baseCls+"bl",baseCls+"r",baseCls+"rl",baseCls+"rb",baseCls+"rbl",baseCls+"t",baseCls+"tl",baseCls+"tb",baseCls+"tbl",baseCls+"tr",baseCls+"trl",baseCls+"trb",baseCls+"trbl"]}return table}});
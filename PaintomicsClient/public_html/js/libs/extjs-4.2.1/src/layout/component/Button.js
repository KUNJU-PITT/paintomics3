Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.component.Auto",type:"button",htmlRE:/<.*>/,beginLayout:function(ownerContext){var me=this,owner=me.owner,text=owner.text;me.callParent(arguments);ownerContext.btnWrapContext=ownerContext.getEl("btnWrap");ownerContext.btnElContext=ownerContext.getEl("btnEl");ownerContext.btnInnerElContext=ownerContext.getEl("btnInnerEl");ownerContext.btnIconElContext=ownerContext.getEl("btnIconEl");if(text&&me.htmlRE.test(text)){ownerContext.isHtmlText=true;owner.btnInnerEl.setStyle("line-height","normal");owner.btnInnerEl.setStyle("padding-top","")}},beginLayoutCycle:function(ownerContext){var owner=this.owner,lastWidthModel=this.lastWidthModel;this.callParent(arguments);if(lastWidthModel&&!this.lastWidthModel.shrinkWrap&&ownerContext.widthModel.shrinkWrap){owner.btnWrap.setStyle("height","");owner.btnEl.setStyle("height","");owner.btnInnerEl.setStyle("line-height","")}},calculate:function(ownerContext){var me=this,owner=me.owner,btnElContext=ownerContext.btnElContext,btnInnerElContext=ownerContext.btnInnerElContext,btnWrapContext=ownerContext.btnWrapContext,mmax=Math.max,ownerHeight,contentHeight,btnElHeight,innerElHeight;me.callParent(arguments);if(ownerContext.heightModel.shrinkWrap){btnElHeight=owner.btnEl.getHeight();if(ownerContext.isHtmlText){me.centerInnerEl(ownerContext,btnElHeight);me.ieCenterIcon(ownerContext,btnElHeight)}}else{ownerHeight=ownerContext.getProp("height");if(ownerHeight){contentHeight=ownerHeight-ownerContext.getFrameInfo().height-ownerContext.getPaddingInfo().height;btnElHeight=contentHeight;if((owner.menu||owner.split)&&owner.arrowAlign==="bottom"){btnElHeight-=btnWrapContext.getPaddingInfo().bottom}innerElHeight=btnElHeight;if((owner.icon||owner.iconCls||owner.glyph)&&(owner.iconAlign==="top"||owner.iconAlign==="bottom")){innerElHeight-=btnInnerElContext.getPaddingInfo().height}btnWrapContext.setProp("height",mmax(0,contentHeight));btnElContext.setProp("height",mmax(0,btnElHeight));if(ownerContext.isHtmlText){me.centerInnerEl(ownerContext,btnElHeight)}else{btnInnerElContext.setProp("line-height",mmax(0,innerElHeight)+"px")}me.ieCenterIcon(ownerContext,btnElHeight)}else if(ownerHeight!==0){me.done=false}}},centerInnerEl:function(ownerContext,btnElHeight){var me=this,btnInnerElContext=ownerContext.btnInnerElContext,innerElHeight=me.owner.btnInnerEl.getHeight();if(ownerContext.heightModel.shrinkWrap&&btnElHeight<innerElHeight){ownerContext.btnElContext.setHeight(innerElHeight)}else if(btnElHeight>innerElHeight){btnInnerElContext.setProp("padding-top",Math.round((btnElHeight-innerElHeight)/2)+btnInnerElContext.getPaddingInfo().top)}},ieCenterIcon:function(ownerContext,btnElHeight){var iconAlign=this.owner.iconAlign;if((Ext.isIEQuirks||Ext.isIE6)&&(iconAlign==="left"||iconAlign==="right")){ownerContext.btnIconElContext.setHeight(btnElHeight)}},publishInnerWidth:function(ownerContext,width){if(this.owner.getFrameInfo().table){ownerContext.btnInnerElContext.setWidth(width-ownerContext.getFrameInfo().width-ownerContext.getPaddingInfo().width-ownerContext.btnWrapContext.getPaddingInfo().width)}}});
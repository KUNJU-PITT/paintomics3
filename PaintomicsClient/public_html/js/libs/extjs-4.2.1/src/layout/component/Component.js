Ext.define("Ext.layout.component.Component",{extend:"Ext.layout.Layout",type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,beginLayoutCycle:function(ownerContext,firstCycle){var me=this,owner=me.owner,ownerCtContext=ownerContext.ownerCtContext,heightModel=ownerContext.heightModel,widthModel=ownerContext.widthModel,body=owner.el.dom===document.body,lastBox=owner.lastBox||me.nullBox,lastSize=owner.el.lastBox||me.nullBox,dirty=!body,ownerLayout,v,widthName,heightName;me.callParent(arguments);if(firstCycle){if(me.usesContentWidth){++ownerContext.consumersContentWidth}if(me.usesContentHeight){++ownerContext.consumersContentHeight}if(me.usesWidth){++ownerContext.consumersWidth}if(me.usesHeight){++ownerContext.consumersHeight}if(ownerCtContext&&!ownerCtContext.hasRawContent){ownerLayout=owner.ownerLayout;if(ownerLayout.usesWidth){++ownerContext.consumersWidth}if(ownerLayout.usesHeight){++ownerContext.consumersHeight}}}if(widthModel.configured){widthName=widthModel.names.width;if(!body){dirty=firstCycle?owner[widthName]!==lastSize.width:widthModel.constrained}ownerContext.setWidth(owner[widthName],dirty)}else if(ownerContext.isTopLevel){if(widthModel.calculated){v=lastBox.width;ownerContext.setWidth(v,v!=lastSize.width)}v=lastBox.x;ownerContext.setProp("x",v,v!=lastSize.x)}if(heightModel.configured){heightName=heightModel.names.height;if(!body){dirty=firstCycle?owner[heightName]!==lastSize.height:heightModel.constrained}ownerContext.setHeight(owner[heightName],dirty)}else if(ownerContext.isTopLevel){if(heightModel.calculated){v=lastBox.height;ownerContext.setHeight(v,v!=lastSize.height)}v=lastBox.y;ownerContext.setProp("y",v,v!=lastSize.y)}},finishedLayout:function(ownerContext){var me=this,elementChildren=ownerContext.children,owner=me.owner,len,i,elContext,lastBox,props;if(elementChildren){len=elementChildren.length;for(i=0;i<len;i++){elContext=elementChildren[i];elContext.el.lastBox=elContext.props}}ownerContext.previousSize=me.lastComponentSize;me.lastComponentSize=owner.el.lastBox=props=ownerContext.props;lastBox=owner.lastBox||(owner.lastBox={});lastBox.x=props.x;lastBox.y=props.y;lastBox.width=props.width;lastBox.height=props.height;lastBox.invalid=false;me.callParent(arguments)},notifyOwner:function(ownerContext){var me=this,currentSize=me.lastComponentSize,prevSize=ownerContext.previousSize,args=[currentSize.width,currentSize.height];if(prevSize){args.push(prevSize.width,prevSize.height)}me.owner.afterComponentLayout.apply(me.owner,args)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(ownerContext){var me=this,targetInfo=me.targetInfo,target;if(!targetInfo){target=ownerContext.getEl("getTarget",me);me.targetInfo=targetInfo={padding:target.getPaddingInfo(),border:target.getBorderInfo()}}return targetInfo},measureAutoDimensions:function(ownerContext,dimensions){var me=this,owner=me.owner,containerLayout=owner.layout,heightModel=ownerContext.heightModel,widthModel=ownerContext.widthModel,boxParent=ownerContext.boxParent,isBoxParent=ownerContext.isBoxParent,props=ownerContext.props,isContainer,ret={gotWidth:false,gotHeight:false,isContainer:isContainer=!ownerContext.hasRawContent},hv=dimensions||3,zeroWidth,zeroHeight,needed=0,got=0,ready,size,temp;if(widthModel.shrinkWrap&&ownerContext.consumersContentWidth){++needed;zeroWidth=!(hv&1);if(isContainer){if(zeroWidth){ret.contentWidth=0;ret.gotWidth=true;++got}else if((ret.contentWidth=ownerContext.getProp("contentWidth"))!==undefined){ret.gotWidth=true;++got}}else{size=props.contentWidth;if(typeof size=="number"){ret.contentWidth=size;ret.gotWidth=true;++got}else{if(zeroWidth){ready=true}else if(!ownerContext.hasDomProp("containerChildrenSizeDone")){ready=false}else if(isBoxParent||!boxParent||boxParent.widthModel.shrinkWrap){ready=true}else{ready=boxParent.hasDomProp("width")}if(ready){if(zeroWidth){temp=0}else if(containerLayout&&containerLayout.measureContentWidth){temp=containerLayout.measureContentWidth(ownerContext)}else{temp=me.measureContentWidth(ownerContext)}if(!isNaN(ret.contentWidth=temp)){ownerContext.setContentWidth(temp,true);ret.gotWidth=true;++got}}}}}else if(widthModel.natural&&ownerContext.consumersWidth){++needed;size=props.width;if(typeof size=="number"){ret.width=size;ret.gotWidth=true;++got}else{if(isBoxParent||!boxParent){ready=true}else{ready=boxParent.hasDomProp("width")}if(ready){if(!isNaN(ret.width=me.measureOwnerWidth(ownerContext))){ownerContext.setWidth(ret.width,false);ret.gotWidth=true;++got}}}}if(heightModel.shrinkWrap&&ownerContext.consumersContentHeight){++needed;zeroHeight=!(hv&2);if(isContainer){if(zeroHeight){ret.contentHeight=0;ret.gotHeight=true;++got}else if((ret.contentHeight=ownerContext.getProp("contentHeight"))!==undefined){ret.gotHeight=true;++got}}else{size=props.contentHeight;if(typeof size=="number"){ret.contentHeight=size;ret.gotHeight=true;++got}else{if(zeroHeight){ready=true}else if(!ownerContext.hasDomProp("containerChildrenSizeDone")){ready=false}else if(owner.noWrap){ready=true}else if(!widthModel.shrinkWrap){ready=(ownerContext.bodyContext||ownerContext).hasDomProp("width")}else if(isBoxParent||!boxParent||boxParent.widthModel.shrinkWrap){ready=true}else{ready=boxParent.hasDomProp("width")}if(ready){if(zeroHeight){temp=0}else if(containerLayout&&containerLayout.measureContentHeight){temp=containerLayout.measureContentHeight(ownerContext)}else{temp=me.measureContentHeight(ownerContext)}if(!isNaN(ret.contentHeight=temp)){ownerContext.setContentHeight(temp,true);ret.gotHeight=true;++got}}}}}else if(heightModel.natural&&ownerContext.consumersHeight){++needed;size=props.height;if(typeof size=="number"){ret.height=size;ret.gotHeight=true;++got}else{if(isBoxParent||!boxParent){ready=true}else{ready=boxParent.hasDomProp("width")}if(ready){if(!isNaN(ret.height=me.measureOwnerHeight(ownerContext))){ownerContext.setHeight(ret.height,false);ret.gotHeight=true;++got}}}}if(boxParent){ownerContext.onBoxMeasured()}ret.gotAll=got==needed;return ret},measureContentWidth:function(ownerContext){return ownerContext.el.getWidth()-ownerContext.getFrameInfo().width},measureContentHeight:function(ownerContext){return ownerContext.el.getHeight()-ownerContext.getFrameInfo().height},measureOwnerHeight:function(ownerContext){return ownerContext.el.getHeight()},measureOwnerWidth:function(ownerContext){return ownerContext.el.getWidth()}});
Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(headerCt,secondHeaderCt){if(!headerCt.isRootHeader){Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer")}this.headerCt=headerCt;if(secondHeaderCt){if(!headerCt.isRootHeader){Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer")}this.secondHeaderCt=secondHeaderCt}},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},getHeaderIndex:function(header){if(header.isGroupHeader){header=header.down(":not([isGroupHeader])")}return Ext.Array.indexOf(this.getColumns(),header)},getHeaderAtIndex:function(index){var columns=this.getColumns();return columns.length?columns[index]:null},getHeaderById:function(id){var columns=this.getColumns(),len=columns.length,i,header;for(i=0;i<len;++i){header=columns[i];if(header.getItemId()===id){return header}}return null},getVisibleHeaderClosestToIndex:function(index){var result=this.getHeaderAtIndex(index);if(result&&result.hidden){result=result.next(":not([hidden])")||result.prev(":not([hidden])")}return result},cacheColumns:function(){this.columns=this.headerCt.getVisibleGridColumns();if(this.secondHeaderCt){Ext.Array.push(this.columns,this.secondHeaderCt.getVisibleGridColumns())}},invalidate:function(){this.columns=null;if(this.rootColumns){this.rootColumns.invalidate()}}},function(){this.createAlias("indexOf","getHeaderIndex")});
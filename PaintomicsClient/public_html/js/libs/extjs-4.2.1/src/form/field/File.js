Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Trigger",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],requires:["Ext.form.field.FileButton"],buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:true,triggerNoEditCls:"",componentLayout:"triggerfield",childEls:["browseButtonWrap"],onRender:function(){var me=this,id=me.id,inputEl;me.callParent(arguments);inputEl=me.inputEl;inputEl.dom.name="";me.button=new Ext.form.field.FileButton(Ext.apply({renderTo:id+"-browseButtonWrap",ownerCt:me,ownerLayout:me.componentLayout,id:id+"-button",ui:me.ui,disabled:me.disabled,text:me.buttonText,style:me.buttonOnly?"":me.getButtonMarginProp()+me.buttonMargin+"px",inputName:me.getName(),listeners:{scope:me,change:me.onFileChange}},me.buttonConfig));me.fileInputEl=me.button.fileInputEl;if(me.buttonOnly){me.inputCell.setDisplayed(false)}me.browseButtonWrap.dom.style.width=me.browseButtonWrap.dom.lastChild.offsetWidth+me.button.getEl().getMargin("lr")+"px";if(Ext.isIE){me.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap"></td>'},onFileChange:function(button,e,value){this.lastValue=null;Ext.form.field.File.superclass.setValue.call(this,value)},setValue:Ext.emptyFn,reset:function(){var me=this,clear=me.clearOnSubmit;if(me.rendered){me.button.reset(clear);me.fileInputEl=me.button.fileInputEl;if(clear){me.inputEl.dom.value=""}}me.callParent()},onShow:function(){this.callParent();this.button.updateLayout()},onDisable:function(){this.callParent();this.button.disable()},onEnable:function(){this.callParent();this.button.enable()},isFileUpload:function(){return true},extractFileInput:function(){var fileInput=this.button.fileInputEl.dom;this.reset();return fileInput},restoreInput:function(el){var button=this.button;button.restoreInput(el);this.fileInputEl=button.fileInputEl},onDestroy:function(){Ext.destroyMembers(this,"button");delete this.fileInputEl;this.callParent()},getButtonMarginProp:function(){return"margin-left:"}});
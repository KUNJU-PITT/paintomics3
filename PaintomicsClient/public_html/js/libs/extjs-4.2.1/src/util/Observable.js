Ext.define("Ext.util.Observable",function(Observable){var emptyArray=[],arrayProto=Array.prototype,arraySlice=arrayProto.slice,ExtEvent=Ext.util.Event,ListenerRemover=function(observable){if(observable instanceof ListenerRemover){return observable}this.observable=observable;if(arguments[1].isObservable){this.managedListeners=true}this.args=arraySlice.call(arguments,1)};ListenerRemover.prototype.destroy=function(){this.observable[this.managedListeners?"mun":"un"].apply(this.observable,this.args)};return{requires:["Ext.util.Event","Ext.EventManager"],statics:{releaseCapture:function(o){o.fireEventArgs=this.prototype.fireEventArgs},capture:function(o,fn,scope){var newFn=function(eventName,args){return fn.apply(scope,[eventName].concat(args))};this.captureArgs(o,newFn,scope)},captureArgs:function(o,fn,scope){o.fireEventArgs=Ext.Function.createInterceptor(o.fireEventArgs,fn,scope)},observe:function(cls,listeners){if(cls){if(!cls.isObservable){Ext.applyIf(cls,new this);this.captureArgs(cls.prototype,cls.fireEventArgs,cls)}if(Ext.isObject(listeners)){cls.on(listeners)}}return cls},prepareClass:function(T,mixin){if(!T.HasListeners){var HasListeners=function(){},SuperHL=T.superclass.HasListeners||mixin&&mixin.HasListeners||Observable.HasListeners;T.prototype.HasListeners=T.HasListeners=HasListeners;HasListeners.prototype=T.hasListeners=new SuperHL}}},isObservable:true,eventsSuspended:0,constructor:function(config){var me=this;Ext.apply(me,config);if(!me.hasListeners){me.hasListeners=new me.HasListeners}me.events=me.events||{};if(me.listeners){me.on(me.listeners);me.listeners=null}if(me.bubbleEvents){me.enableBubble(me.bubbleEvents)}},onClassExtended:function(T){if(!T.HasListeners){Observable.prepareClass(T)}},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|destroyable|vertical|horizontal|freezeEvent|priority)$/,addManagedListener:function(item,ename,fn,scope,options,noDestroy){var me=this,managedListeners=me.managedListeners=me.managedListeners||[],config,passedOptions;if(typeof ename!=="string"){passedOptions=arguments.length>4?options:ename;options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.addManagedListener(item,ename,config.fn||config,config.scope||options.scope||scope,config.fn?config:passedOptions,true)}}}if(options&&options.destroyable){return new ListenerRemover(me,item,options)}}else{if(typeof fn==="string"){scope=scope||me;fn=Ext.resolveMethod(fn,scope)}managedListeners.push({item:item,ename:ename,fn:fn,scope:scope,options:options});item.on(ename,fn,scope,options);if(!noDestroy&&options&&options.destroyable){return new ListenerRemover(me,item,ename,fn,scope)}}},removeManagedListener:function(item,ename,fn,scope){var me=this,options,config,managedListeners,length,i,func;if(typeof ename!=="string"){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.removeManagedListener(item,ename,config.fn||config,config.scope||options.scope||scope)}}}}else{managedListeners=me.managedListeners?me.managedListeners.slice():[];if(typeof fn==="string"){scope=scope||me;fn=Ext.resolveMethod(fn,scope)}for(i=0,length=managedListeners.length;i<length;i++){me.removeManagedListenerItem(false,managedListeners[i],item,ename,fn,scope)}}},fireEvent:function(eventName){return this.fireEventArgs(eventName,arraySlice.call(arguments,1))},fireEventArgs:function(eventName,args){eventName=eventName.toLowerCase();var me=this,events=me.events,event=events&&events[eventName],ret=true;if(event&&me.hasListeners[eventName]){ret=me.continueFireEvent(eventName,args||emptyArray,event.bubble)}return ret},continueFireEvent:function(eventName,args,bubbles){var target=this,queue,event,ret=true;do{if(target.eventsSuspended){if(queue=target.eventQueue){queue.push([eventName,args,bubbles])}return ret}else{event=target.events[eventName];if(event&&event!==true){if((ret=event.fire.apply(event,args))===false){break}}}}while(bubbles&&(target=target.getBubbleParent()));return ret},getBubbleParent:function(){var me=this,parent=me.getBubbleTarget&&me.getBubbleTarget();if(parent&&parent.isObservable){return parent}return null},addListener:function(ename,fn,scope,options){var me=this,config,event,prevListenerCount=0;if(typeof ename!=="string"){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.addListener(ename,config.fn||config,config.scope||options.scope,config.fn?config:options)}}}if(options&&options.destroyable){return new ListenerRemover(me,options)}}else{ename=ename.toLowerCase();event=me.events[ename];if(event&&event.isEvent){prevListenerCount=event.listeners.length}else{me.events[ename]=event=new ExtEvent(me,ename)}if(!fn){Ext.Error.raise("No function passed for event "+me.$className+"."+ename)}if(typeof fn==="string"){scope=scope||me;fn=Ext.resolveMethod(fn,scope)}event.addListener(fn,scope,options);if(event.listeners.length!==prevListenerCount){me.hasListeners._incr_(ename)}if(options&&options.destroyable){return new ListenerRemover(me,ename,fn,scope,options)}}},removeListener:function(ename,fn,scope){var me=this,config,event,options;if(typeof ename!=="string"){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.removeListener(ename,config.fn||config,config.scope||options.scope)}}}}else{ename=ename.toLowerCase();event=me.events[ename];if(event&&event.isEvent){if(typeof fn==="string"){scope=scope||me;fn=Ext.resolveMethod(fn,scope)}if(event.removeListener(fn,scope)){me.hasListeners._decr_(ename)}}}},clearListeners:function(){var events=this.events,hasListeners=this.hasListeners,event,key;for(key in events){if(events.hasOwnProperty(key)){event=events[key];if(event.isEvent){delete hasListeners[key];event.clearListeners()}}}this.clearManagedListeners()},purgeListeners:function(){if(Ext.global.console){Ext.global.console.warn("Observable: purgeListeners has been deprecated. Please use clearListeners.")}return this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var managedListeners=this.managedListeners||[],i=0,len=managedListeners.length;for(;i<len;i++){this.removeManagedListenerItem(true,managedListeners[i])}this.managedListeners=[]},removeManagedListenerItem:function(isClear,managedListener,item,ename,fn,scope){if(isClear||managedListener.item===item&&managedListener.ename===ename&&(!fn||managedListener.fn===fn)&&(!scope||managedListener.scope===scope)){managedListener.item.un(managedListener.ename,managedListener.fn,managedListener.scope);if(!isClear){Ext.Array.remove(this.managedListeners,managedListener)}}},purgeManagedListeners:function(){if(Ext.global.console){Ext.global.console.warn("Observable: purgeManagedListeners has been deprecated. Please use clearManagedListeners.")}return this.clearManagedListeners.apply(this,arguments)},addEvents:function(o){var me=this,events=me.events||(me.events={}),arg,args,i;if(typeof o=="string"){for(args=arguments,i=args.length;i--;){arg=args[i];if(!events[arg]){events[arg]=true}}}else{Ext.applyIf(me.events,o)}},hasListener:function(ename){return!!this.hasListeners[ename.toLowerCase()]},suspendEvents:function(queueSuspended){this.eventsSuspended+=1;if(queueSuspended&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(eventName){var len=arguments.length,i,event;for(i=0;i<len;i++){event=this.events[arguments[i]];if(event&&event.suspend){event.suspend()}}},resumeEvent:function(){var len=arguments.length,i,event;for(i=0;i<len;i++){event=this.events[arguments[i]];if(event&&event.resume){event.resume()}}},resumeEvents:function(){var me=this,queued=me.eventQueue,qLen,q;if(me.eventsSuspended&&!--me.eventsSuspended){delete me.eventQueue;if(queued){qLen=queued.length;for(q=0;q<qLen;q++){me.continueFireEvent.apply(me,queued[q])}}}},relayEvents:function(origin,events,prefix){var me=this,len=events.length,i=0,oldName,relayers={};for(;i<len;i++){oldName=events[i];relayers[oldName]=me.createRelayer(prefix?prefix+oldName:oldName)}me.mon(origin,relayers,null,null,undefined);return new ListenerRemover(me,origin,relayers)},createRelayer:function(newName,beginEnd){var me=this;return function(){return me.fireEventArgs.call(me,newName,beginEnd?arraySlice.apply(arguments,beginEnd):arguments)}},enableBubble:function(eventNames){if(eventNames){var me=this,names=typeof eventNames=="string"?arguments:eventNames,length=names.length,events=me.events,ename,event,i;for(i=0;i<length;++i){ename=names[i].toLowerCase();event=events[ename];if(!event||typeof event=="boolean"){events[ename]=event=new ExtEvent(me,ename)}me.hasListeners._incr_(ename);event.bubble=true}}}}},function(){var Observable=this,proto=Observable.prototype,HasListeners=function(){},prepareMixin=function(T){if(!T.HasListeners){var proto=T.prototype;Observable.prepareClass(T,this);T.onExtended(function(U){Ext.classSystemMonitor&&Ext.classSystemMonitor("extend mixin",arguments);Observable.prepareClass(U)});if(proto.onClassMixedIn){Ext.override(T,{onClassMixedIn:function(U){prepareMixin.call(this,U);this.callParent(arguments)}})}else{proto.onClassMixedIn=function(U){prepareMixin.call(this,U)}}}},globalEvents;HasListeners.prototype={_decr_:function(ev){if(!--this[ev]){delete this[ev]}},_incr_:function(ev){if(this.hasOwnProperty(ev)){++this[ev]}else{this[ev]=1}}};proto.HasListeners=Observable.HasListeners=HasListeners;Observable.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});Observable.observeClass=Observable.observe;Ext.globalEvents=globalEvents=new Observable({events:{idle:Ext.EventManager.idleEvent,ready:Ext.EventManager.readyEvent}});Ext.on=function(){return globalEvents.addListener.apply(globalEvents,arguments)};Ext.un=function(){return globalEvents.removeListener.apply(globalEvents,arguments)};function getMethodEvent(method){var e=(this.methodEvents=this.methodEvents||{})[method],returnValue,v,cancel,obj=this,makeCall;if(!e){this.methodEvents[method]=e={};e.originalFn=this[method];e.methodName=method;e.before=[];e.after=[];makeCall=function(fn,scope,args){if((v=fn.apply(scope||obj,args))!==undefined){if(typeof v=="object"){if(v.returnValue!==undefined){returnValue=v.returnValue}else{returnValue=v}cancel=!!v.cancel}else if(v===false){cancel=true}else{returnValue=v}}};this[method]=function(){var args=Array.prototype.slice.call(arguments,0),b,i,len;returnValue=v=undefined;cancel=false;for(i=0,len=e.before.length;i<len;i++){b=e.before[i];makeCall(b.fn,b.scope,args);if(cancel){return returnValue}}if((v=e.originalFn.apply(obj,args))!==undefined){returnValue=v}for(i=0,len=e.after.length;i<len;i++){b=e.after[i];makeCall(b.fn,b.scope,args);if(cancel){return returnValue}}return returnValue}}return e}Ext.apply(proto,{onClassMixedIn:prepareMixin,beforeMethod:function(method,fn,scope){getMethodEvent.call(this,method).before.push({fn:fn,scope:scope})},afterMethod:function(method,fn,scope){getMethodEvent.call(this,method).after.push({fn:fn,scope:scope})},removeMethodListener:function(method,fn,scope){var e=this.getMethodEvent(method),i,len;for(i=0,len=e.before.length;i<len;i++){if(e.before[i].fn==fn&&e.before[i].scope==scope){Ext.Array.erase(e.before,i,1);return}}for(i=0,len=e.after.length;i<len;i++){if(e.after[i].fn==fn&&e.after[i].scope==scope){Ext.Array.erase(e.after,i,1);return}}},toggleEventLogging:function(toggle){Ext.util.Observable[toggle?"capture":"releaseCapture"](this,function(en){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(en,arguments)}})}})});
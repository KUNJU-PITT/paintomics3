Ext.define("Ext.rtl.AbstractComponent",{override:"Ext.AbstractComponent",initStyles:function(){if(this.getHierarchyState().rtl){this.horizontalPosProp="right"}this.callParent(arguments)},convertPositionSpec:function(posSpec){if((Ext.rootHierarchyState.rtl||false)!==(this.getHierarchyState().rtl||false)){posSpec=posSpec.replace(/l/g,"tmp").replace(/r/g,"l").replace(/tmp/g,"r")}return posSpec},getAnchorToXY:function(el,anchor,local,mySize){var doc=document,pos,scroll,extraX,extraY;if(el.dom==doc.body||el.dom==doc){scroll=Ext.rootHierarchyState.rtl?el.rtlGetScroll():el.getScroll();extraX=scroll.left;extraY=scroll.top}else{pos=el.getXY();extraX=local?0:pos[0];extraY=local?0:pos[1]}return el.calculateAnchorXY(anchor,extraX,extraY,mySize)},getBorderPadding:function(){var borderPadding=this.el.getBorderPadding(),xBegin;if(this.isParentRtl()){xBegin=borderPadding.xBegin;borderPadding.xBegin=borderPadding.xEnd;borderPadding.xEnd=xBegin}return borderPadding},getLocalX:function(){return this.isLocalRtl()?this.el.rtlGetLocalX():this.el.getLocalX()},getLocalXY:function(){return this.isLocalRtl()?this.el.rtlGetLocalXY():this.el.getLocalXY()},unitizeBox:function(box){if(this.getHierarchyState().rtl){return Ext.dom.Element.rtlUnitizeBox(box)}else{return this.callParent(arguments)}},parseBox:function(box){if(this.getHierarchyState().rtl){return Ext.dom.Element.rtlParseBox(box)}else{return this.callParent(arguments)}},initHierarchyState:function(hierarchyState){this.callParent(arguments);var rtl=this.rtl;if(rtl!==undefined){hierarchyState.rtl=rtl}},isLocalRtl:function(){var me=this,rtl,offsetParent,doc;if(me.floating){if(me._isOffsetParentRtl===undefined){offsetParent=this.el.dom.offsetParent||this.el.dom.parentNode;if(offsetParent){doc=document;if(offsetParent===doc.documentElement){offsetParent=doc.body}me._isOffsetParentRtl=Ext.fly(offsetParent,"_isLocalRtl").isStyle("direction","rtl")}}rtl=!!me._isOffsetParentRtl}else{rtl=this.isParentRtl()}return rtl},isParentRtl:function(){var me=this,hierarchyState=me.getHierarchyState(),isRtl=false,myRtl;if(hierarchyState.hasOwnProperty("rtl")){myRtl=hierarchyState.rtl;delete hierarchyState.rtl}if(hierarchyState.rtl){isRtl=true}if(myRtl!==undefined){hierarchyState.rtl=myRtl}return isRtl},setLocalX:function(x){return this.isLocalRtl()?this.el.rtlSetLocalX(x):this.el.setLocalX(x)},setLocalXY:function(x,y){return this.isLocalRtl()?this.el.rtlSetLocalXY(x,y):this.el.setLocalXY(x,y)},isOppositeRootDirection:function(){return!this.getHierarchyState().rtl!==!Ext.rootHierarchyState.rtl}},function(){Ext.on({ready:function(){if(Ext.fly(document.documentElement).isStyle("direction","rtl")||Ext.getBody().isStyle("direction","rtl")){Ext.rootHierarchyState.rtl=true}},single:true,priority:1e3})});
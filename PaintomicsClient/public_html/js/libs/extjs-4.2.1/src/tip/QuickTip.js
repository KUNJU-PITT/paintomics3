Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay"},initComponent:function(){var me=this;me.target=me.target||Ext.getDoc();me.targets=me.targets||{};me.callParent()},register:function(config){var configs=Ext.isArray(config)?config:arguments,i=0,len=configs.length,target,j,targetLen;for(;i<len;i++){config=configs[i];target=config.target;if(target){if(Ext.isArray(target)){for(j=0,targetLen=target.length;j<targetLen;j++){this.targets[Ext.id(target[j])]=config}}else{this.targets[Ext.id(target)]=config}}}},unregister:function(el){delete this.targets[Ext.id(el)]},cancelShow:function(el){var me=this,activeTarget=me.activeTarget;el=Ext.get(el).dom;if(me.isVisible()){if(activeTarget&&activeTarget.el==el){me.hide()}}else if(activeTarget&&activeTarget.el==el){me.clearTimer("show")}},getTipCfg:function(e){var t=e.getTarget(),titleText=t.title,cfg;if(this.interceptTitles&&titleText&&Ext.isString(titleText)){t.qtip=titleText;t.removeAttribute("title");e.preventDefault();return{text:titleText}}else{cfg=this.tagConfig;t=e.getTarget("["+cfg.namespace+cfg.attribute+"]");if(t){return{target:t,text:t.getAttribute(cfg.namespace+cfg.attribute)}}}},onTargetOver:function(e){var me=this,target=e.getTarget(me.delegate),hasShowDelay,delay,elTarget,cfg,ns,tipConfig,autoHide,targets,targetEl,value,key;if(me.disabled){return}me.targetXY=e.getXY();if(!target||target.nodeType!==1||target==document.documentElement||target==document.body){return}if(me.activeTarget&&(target==me.activeTarget.el||Ext.fly(me.activeTarget.el).contains(target))){if(me.targetTextEmpty()){me.onShowVeto();delete me.activeTarget}else{me.clearTimer("hide");me.show()}return}if(target){targets=me.targets;for(key in targets){if(targets.hasOwnProperty(key)){value=targets[key];targetEl=Ext.fly(value.target);if(targetEl&&(targetEl.dom===target||targetEl.contains(target))){elTarget=targetEl.dom;break}}}if(elTarget){me.activeTarget=me.targets[elTarget.id];me.activeTarget.el=target;me.anchor=me.activeTarget.anchor;if(me.anchor){me.anchorTarget=target}hasShowDelay=parseInt(me.activeTarget.showDelay,10);if(hasShowDelay){delay=me.showDelay;me.showDelay=hasShowDelay}me.delayShow();if(hasShowDelay){me.showDelay=delay}return}}elTarget=Ext.fly(target,"_quicktip-target");cfg=me.tagConfig;ns=cfg.namespace;tipConfig=me.getTipCfg(e);if(tipConfig){if(tipConfig.target){target=tipConfig.target;elTarget=Ext.fly(target,"_quicktip-target")}autoHide=elTarget.getAttribute(ns+cfg.hide);me.activeTarget={el:target,text:tipConfig.text,width:+elTarget.getAttribute(ns+cfg.width)||null,autoHide:autoHide!="user"&&autoHide!=="false",title:elTarget.getAttribute(ns+cfg.title),cls:elTarget.getAttribute(ns+cfg.cls),align:elTarget.getAttribute(ns+cfg.align),showDelay:parseInt(elTarget.getAttribute(ns+cfg.showDelay),10)};me.anchor=elTarget.getAttribute(ns+cfg.anchor);if(me.anchor){me.anchorTarget=target}hasShowDelay=parseInt(me.activeTarget.showDelay,10);if(hasShowDelay){delay=me.showDelay;me.showDelay=hasShowDelay}me.delayShow();if(hasShowDelay){me.showDelay=delay}}},onTargetOut:function(e){var me=this,active=me.activeTarget,hasHideDelay,delay;if(active&&e.within(me.activeTarget.el)&&!me.getTipCfg(e)){return}me.clearTimer("show");delete me.activeTarget;if(me.autoHide!==false){hasHideDelay=active&&parseInt(active.hideDelay,10);if(hasHideDelay){delay=me.hideDelay;me.hideDelay=hasHideDelay}me.delayHide();if(hasHideDelay){me.hideDelay=delay}}},targetTextEmpty:function(){var me=this,target=me.activeTarget,cfg=me.tagConfig,el,text;if(target){el=target.el;if(el){text=el.getAttribute(cfg.namespace+cfg.attribute);if(!text&&!me.targets[target.target]){return true}}}return false},show:function(){var me=this,fromDelay=me.fromDelayShow;if(fromDelay&&me.targetTextEmpty()){me.onShowVeto();delete me.activeTarget;return}me.callParent(arguments)},showAt:function(xy){var me=this,target=me.activeTarget,header=me.header,cls;if(target){if(!me.rendered){me.render(Ext.getBody());me.activeTarget=target}me.suspendLayouts();if(target.title){me.setTitle(target.title);header.show()}else if(header){header.hide()}me.update(target.text);me.autoHide=target.autoHide;me.dismissDelay=target.dismissDelay||me.dismissDelay;if(target.mouseOffset){xy[0]+=target.mouseOffset[0];xy[1]+=target.mouseOffset[1]}cls=me.lastCls;if(cls){me.removeCls(cls);delete me.lastCls}cls=target.cls;if(cls){me.addCls(cls);me.lastCls=cls}me.setWidth(target.width);if(me.anchor){me.constrainPosition=false}else if(target.align){xy=me.getAlignToXY(target.el,target.align);me.constrainPosition=false}else{me.constrainPosition=true}me.resumeLayouts(true)}me.callParent([xy])},hide:function(){delete this.activeTarget;this.callParent()}});
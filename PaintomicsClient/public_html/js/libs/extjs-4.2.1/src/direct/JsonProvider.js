Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent","Ext.direct.Manager"],parseResponse:function(response){if(!Ext.isEmpty(response.responseText)){if(Ext.isObject(response.responseText)){return response.responseText}return Ext.decode(response.responseText)}return null},createEvents:function(response){var me=this,data=null,events=[],event,i,len;try{data=me.parseResponse(response)}catch(e){event=new Ext.direct.ExceptionEvent({data:e,xhr:response,code:Ext.direct.Manager.exceptions.PARSE,message:"Error parsing json response: \n\n "+e});return[event]}if(Ext.isArray(data)){for(i=0,len=data.length;i<len;++i){events.push(me.createEvent(data[i]))}}else if(Ext.isObject(data)){events.push(me.createEvent(data))}return events},createEvent:function(response){if(typeof response!=="object"||!("type"in response)){return new Ext.direct.ExceptionEvent({data:response,code:Ext.direct.Manager.exceptions.DATA,message:"Invalid data: event type is not specified"})}return Ext.create("direct."+response.type,response)}});
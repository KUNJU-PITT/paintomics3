Ext.define("Ext.direct.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.app.domain.Direct"],mixins:{observable:"Ext.util.Observable"},exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},constructor:function(){var me=this;me.addEvents("event","exception");me.transactions=new Ext.util.MixedCollection;me.providers=new Ext.util.MixedCollection;me.mixins.observable.constructor.call(me)},addProvider:function(provider){var me=this,args=arguments,relayers=me.relayers||(me.relayers={}),i,len;if(args.length>1){for(i=0,len=args.length;i<len;++i){me.addProvider(args[i])}return}if(!provider.isProvider){provider=Ext.create("direct."+provider.type+"provider",provider)}me.providers.add(provider);provider.on("data",me.onProviderData,me);if(provider.relayedEvents){relayers[provider.id]=me.relayEvents(provider,provider.relayedEvents)}if(!provider.isConnected()){provider.connect()}return provider},getProvider:function(id){return id.isProvider?id:this.providers.get(id)},removeProvider:function(provider){var me=this,providers=me.providers,relayers=me.relayers,id;provider=provider.isProvider?provider:providers.get(provider);if(provider){provider.un("data",me.onProviderData,me);id=provider.id;if(relayers[id]){relayers[id].destroy();delete relayers[id]}providers.remove(provider);return provider}return null},addTransaction:function(transaction){this.transactions.add(transaction);return transaction},removeTransaction:function(transaction){var me=this;transaction=me.getTransaction(transaction);me.transactions.remove(transaction);return transaction},getTransaction:function(transaction){return typeof transaction==="object"?transaction:this.transactions.get(transaction)},onProviderData:function(provider,event){var me=this,i,len;if(Ext.isArray(event)){for(i=0,len=event.length;i<len;++i){me.onProviderData(provider,event[i])}return}if(event.name&&event.name!="event"&&event.name!="exception"){me.fireEvent(event.name,event)}else if(event.status===false){me.fireEvent("exception",event)}me.fireEvent("event",event,provider)},parseMethod:function(fn){if(Ext.isString(fn)){var parts=fn.split("."),i=0,len=parts.length,current=Ext.global;while(current&&i<len){current=current[parts[i]];++i}fn=Ext.isFunction(current)?current:null}return fn||null}},function(){Ext.Direct=Ext.direct.Manager});
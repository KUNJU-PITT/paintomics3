Ext.define("Ext.resizer.BorderSplitterTracker",{extend:"Ext.resizer.SplitterTracker",requires:["Ext.util.Region"],getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var me=this,splitter=me.splitter,collapseTarget=splitter.collapseTarget,defaultSplitMin=splitter.defaultSplitMin,sizePropCap=splitter.vertical?"Width":"Height",minSizeProp="min"+sizePropCap,maxSizeProp="max"+sizePropCap,getSizeMethod="get"+sizePropCap,neighbors=splitter.neighbors,length=neighbors.length,box=collapseTarget.el.getBox(),left=box.x,top=box.y,right=box.right,bottom=box.bottom,size=splitter.vertical?right-left:bottom-top,i,neighbor,minRange,maxRange,maxGrowth,maxShrink,targetSize;minRange=(collapseTarget[minSizeProp]||Math.min(size,defaultSplitMin))-size;maxRange=collapseTarget[maxSizeProp];if(!maxRange){maxRange=1e9}else{maxRange-=size}targetSize=size;for(i=0;i<length;++i){neighbor=neighbors[i];size=neighbor[getSizeMethod]();maxGrowth=size-neighbor[maxSizeProp];maxShrink=size-(neighbor[minSizeProp]||Math.min(size,defaultSplitMin));if(!isNaN(maxGrowth)){if(minRange<maxGrowth){minRange=maxGrowth}}if(maxRange>maxShrink){maxRange=maxShrink}}if(maxRange-minRange<2){return null}box=new Ext.util.Region(top,right,bottom,left);me.constraintAdjusters[me.getCollapseDirection()](box,minRange,maxRange,splitter);me.dragInfo={minRange:minRange,maxRange:maxRange,targetSize:targetSize};return box},constraintAdjusters:{left:function(box,minRange,maxRange,splitter){box[0]=box.x=box.left=box.right+minRange;box.right+=maxRange+splitter.getWidth()},top:function(box,minRange,maxRange,splitter){box[1]=box.y=box.top=box.bottom+minRange;box.bottom+=maxRange+splitter.getHeight()},bottom:function(box,minRange,maxRange,splitter){box.bottom=box.top-minRange;box.top-=maxRange+splitter.getHeight()},right:function(box,minRange,maxRange,splitter){box.right=box.left-minRange;box[0]=box.x=box.left=box.x-maxRange+splitter.getWidth()}},onBeforeStart:function(e){var me=this,splitter=me.splitter,collapseTarget=splitter.collapseTarget,neighbors=splitter.neighbors,collapseEl=me.getSplitter().collapseEl,target=e.getTarget(),length=neighbors.length,i,neighbor;if(collapseEl&&target===splitter.collapseEl.dom){return false}if(collapseTarget.collapsed){return false}for(i=0;i<length;++i){neighbor=neighbors[i];if(neighbor.collapsed&&neighbor.isHorz===collapseTarget.isHorz){return false}}if(!(me.constrainTo=me.calculateConstrainRegion())){return false}return true},performResize:function(e,offset){var me=this,splitter=me.splitter,collapseDirection=splitter.getCollapseDirection(),collapseTarget=splitter.collapseTarget,adjusters=me.splitAdjusters[splitter.vertical?"horz":"vert"],delta=offset[adjusters.index],dragInfo=me.dragInfo,owner;if(collapseDirection=="right"||collapseDirection=="bottom"){delta=-delta}delta=Math.min(Math.max(dragInfo.minRange,delta),dragInfo.maxRange);if(delta){(owner=splitter.ownerCt).suspendLayouts();adjusters.adjustTarget(collapseTarget,dragInfo.targetSize,delta);owner.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(target,size,delta){target.flex=null;target.setSize(size+delta)}},vert:{index:1,adjustTarget:function(target,targetSize,delta){target.flex=null;target.setSize(undefined,targetSize+delta)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}});
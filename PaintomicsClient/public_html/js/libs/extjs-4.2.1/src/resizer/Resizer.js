Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(config){var me=this,target,targetEl,tag,handles=me.handles,handleCls,possibles,len,i=0,pos,handleEls=[],eastWestStyle,style,box,targetBaseCls,unselectableCls=Ext.dom.Element.unselectableCls;me.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(config)||Ext.isElement(config)||config.dom){target=config;config=arguments[1]||{};config.target=target}me.mixins.observable.constructor.call(me,config);target=me.target;if(target){if(target.isComponent){target.addClsWithUI("resizable");me.el=target.getEl();if(target.minWidth){me.minWidth=target.minWidth}if(target.minHeight){me.minHeight=target.minHeight}if(target.maxWidth){me.maxWidth=target.maxWidth}if(target.maxHeight){me.maxHeight=target.maxHeight}if(target.floating){if(!me.hasOwnProperty("handles")){me.handles="n ne e se s sw w nw"}}}else{me.el=me.target=Ext.get(target)}}else{me.target=me.el=Ext.get(me.el)}tag=me.el.dom.tagName.toUpperCase();if(tag=="TEXTAREA"||tag=="IMG"||tag=="TABLE"){me.originalTarget=me.target;targetEl=me.el;box=targetEl.getBox();me.target=me.el=me.el.wrap({cls:me.wrapCls,id:me.el.id+"-rzwrap",style:targetEl.getStyles("margin-top","margin-bottom")});me.el.setPositioning(targetEl.getPositioning());targetEl.clearPositioning();me.el.setBox(box);targetEl.setStyle("position","absolute")}me.el.position();if(me.pinned){me.el.addCls(me.pinnedCls)}me.resizeTracker=new Ext.resizer.ResizeTracker({disabled:me.disabled,target:me.target,constrainTo:me.constrainTo,overCls:me.overCls,throttle:me.throttle,originalTarget:me.originalTarget,delegate:"."+me.handleCls,dynamic:me.dynamic,preserveRatio:me.preserveRatio,heightIncrement:me.heightIncrement,widthIncrement:me.widthIncrement,minHeight:me.minHeight,maxHeight:me.maxHeight,minWidth:me.minWidth,maxWidth:me.maxWidth});me.resizeTracker.on({mousedown:me.onBeforeResize,drag:me.onResize,dragend:me.onResizeEnd,scope:me});if(me.handles=="all"){me.handles="n s e w ne nw se sw"}handles=me.handles=me.handles.split(me.delimiterRe);possibles=me.possiblePositions;len=handles.length;handleCls=me.handleCls+" "+me.handleCls+"-{0}";if(me.target.isComponent){targetBaseCls=me.target.baseCls;handleCls+=" "+targetBaseCls+"-handle "+targetBaseCls+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){handleCls+=" "+targetBaseCls+"-handle-{0}-br"}}eastWestStyle=Ext.isIE6?' style="height:'+me.el.getHeight()+'px"':"";for(;i<len;i++){if(handles[i]&&possibles[handles[i]]){pos=possibles[handles[i]];if(pos==="east"||pos==="west"){style=eastWestStyle}else{style=""}handleEls.push('<div id="',me.el.id,"-",pos,'-handle"',' class="',Ext.String.format(handleCls,pos)," ",unselectableCls,'"',' unselectable="on"',style,"></div>")}}Ext.DomHelper.append(me.el,handleEls.join(""));for(i=0;i<len;i++){if(handles[i]&&possibles[handles[i]]){pos=possibles[handles[i]];me[pos]=me.el.getById(me.el.id+"-"+pos+"-handle");me[pos].region=pos;if(me.transparent){me[pos].setOpacity(0)}}}if(Ext.isNumber(me.width)){me.width=Ext.Number.constrain(me.width,me.minWidth,me.maxWidth)}if(Ext.isNumber(me.height)){me.height=Ext.Number.constrain(me.height,me.minHeight,me.maxHeight)}if(me.width!==null||me.height!==null){if(me.originalTarget){me.originalTarget.setWidth(me.width);me.originalTarget.setHeight(me.height)}me.resizeTo(me.width,me.height)}me.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(tracker,e){var box=this.el.getBox();return this.fireEvent("beforeresize",this,box.width,box.height,e)},onResize:function(tracker,e){var me=this,box=me.el.getBox();me.forceHandlesHeight();return me.fireEvent("resizedrag",me,box.width,box.height,e)},onResizeEnd:function(tracker,e){var me=this,box=me.el.getBox();me.forceHandlesHeight();return me.fireEvent("resize",me,box.width,box.height,e)},resizeTo:function(width,height){var me=this;me.target.setSize(width,height);me.fireEvent("resize",me,width,height,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var me=this,i,handles=me.handles,len=handles.length,positions=me.possiblePositions,handle;me.resizeTracker.destroy();for(i=0;i<len;i++){if(handle=me[positions[handles[i]]]){handle.remove()}}},forceHandlesHeight:function(){var me=this,handle;if(Ext.isIE6){handle=me.east;if(handle){handle.setHeight(me.el.getHeight())}handle=me.west;if(handle){handle.setHeight(me.el.getHeight())}me.el.repaint()}}});
Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],alias:"widget.splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:true,collapsible:false,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:false,vertical:false,size:5,getTrackerConfig:function(){return{xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this}},beforeRender:function(){var me=this,target=me.getCollapseTarget();me.callParent();if(target.collapsed){me.addCls(me.collapsedClsInternal)}if(!me.canResize){me.addCls(me.baseCls+"-noresize")}Ext.applyIf(me.renderData,{collapseDir:me.getCollapseDirection(),collapsible:me.collapsible||target.collapsible});me.protoEl.unselectable()},onRender:function(){var me=this,collapseEl;me.callParent(arguments);if(me.performCollapse!==false){if(me.renderData.collapsible){me.mon(me.collapseEl,"click",me.toggleTargetCmp,me)}if(me.collapseOnDblClick){me.mon(me.el,"dblclick",me.toggleTargetCmp,me)}}me.mon(me.getCollapseTarget(),{collapse:me.onTargetCollapse,expand:me.onTargetExpand,beforeexpand:me.onBeforeTargetExpand,beforecollapse:me.onBeforeTargetCollapse,scope:me});if(me.canResize){me.tracker=Ext.create(me.getTrackerConfig());me.relayEvents(me.tracker,["beforedragstart","dragstart","dragend"])}collapseEl=me.collapseEl;if(collapseEl){collapseEl.lastCollapseDirCls=me.collapseDirProps[me.collapseDirection].cls}},getCollapseDirection:function(){var me=this,dir=me.collapseDirection,collapseTarget,idx,items,type;if(!dir){collapseTarget=me.collapseTarget;if(collapseTarget.isComponent){dir=collapseTarget.collapseDirection}if(!dir){type=me.ownerCt.layout.type;if(collapseTarget.isComponent){items=me.ownerCt.items;idx=Number(items.indexOf(collapseTarget)===items.indexOf(me)-1)<<1|Number(type==="hbox")}else{idx=Number(me.collapseTarget==="prev")<<1|Number(type==="hbox")}dir=["bottom","right","top","left"][idx]}me.collapseDirection=dir}me.setOrientation(dir==="top"||dir==="bottom"?"horizontal":"vertical");return dir},getCollapseTarget:function(){var me=this;return me.collapseTarget.isComponent?me.collapseTarget:me.collapseTarget==="prev"?me.previousSibling():me.nextSibling()},setCollapseEl:function(display){var el=this.collapseEl;if(el){el.setDisplayed(display)}},onBeforeTargetExpand:function(target){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(target){this.el.addCls([this.collapsedClsInternal,this.collapsedCls]);this.setCollapseEl("")},onTargetExpand:function(target){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls]);this.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var me=this,collapseEl=me.collapseEl,collapseDirProps=me.collapseDirProps[me.collapseDirection],cls;if(collapseEl){cls=collapseEl.lastCollapseDirCls;if(cls){collapseEl.removeCls(cls)}collapseEl.addCls(collapseEl.lastCollapseDirCls=collapseDirProps.cls)}},applyOrientation:function(){var me=this,orientation=me.orientation,orientationProps=me.orientationProps[orientation],defaultSize=me.size,fixedSizeProp=orientationProps.fixedAxis,stretchSizeProp=orientationProps.stretchedAxis,cls=me.baseCls+"-";me[orientation]=true;me[orientationProps.opposite]=false;if(!me.hasOwnProperty(fixedSizeProp)||me[fixedSizeProp]==="100%"){me[fixedSizeProp]=defaultSize}if(!me.hasOwnProperty(stretchSizeProp)||me[stretchSizeProp]===defaultSize){me[stretchSizeProp]="100%"}me.removeCls(cls+orientationProps.opposite);me.addCls(cls+orientation)},setOrientation:function(orientation){var me=this;if(me.orientation!==orientation){me.orientation=orientation;me.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(e,t){var cmp=this.getCollapseTarget(),placeholder=cmp.placeholder,toggle;if(Ext.isFunction(cmp.expand)&&Ext.isFunction(cmp.collapse)){if(placeholder&&!placeholder.hidden){toggle=true}else{toggle=!cmp.hidden}if(toggle){if(cmp.collapsed){cmp.expand()}else if(cmp.collapseDirection){cmp.collapse()}else{cmp.collapse(this.renderData.collapseDir)}}}},setSize:function(){var me=this;me.callParent(arguments);if(Ext.isIE&&me.el){me.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);this.callParent()}});
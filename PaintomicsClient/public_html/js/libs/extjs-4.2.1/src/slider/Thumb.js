Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:1e4,constructor:function(config){var me=this;Ext.apply(me,config||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});me.callParent([config])},render:function(){var me=this;me.el=me.slider.innerEl.insertFirst(me.getElConfig());me.onRender()},onRender:function(){if(this.disabled){this.disable()}this.initEvents()},getElConfig:function(){var me=this,slider=me.slider,style={};style[slider.vertical?"bottom":slider.horizontalProp]=slider.calculateThumbPosition(slider.normalizeValue(me.value))+"%";return{style:style,id:this.id,cls:this.cls}},move:function(v,animate){var me=this,el=me.el,slider=me.slider,styleProp=slider.vertical?"bottom":slider.horizontalProp,to,from;v+="%";if(!animate){el.dom.style[styleProp]=v}else{to={};to[styleProp]=v;if(!Ext.supports.GetPositionPercentage){from={};from[styleProp]=el.dom.style[styleProp]}new Ext.fx.Anim({target:el,duration:350,from:from,to:to})}},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var me=this;me.disabled=false;if(me.el){me.el.removeCls(me.slider.disabledCls)}},disable:function(){var me=this;me.disabled=true;if(me.el){me.el.addCls(me.slider.disabledCls)}},initEvents:function(){var me=this,el=me.el;me.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(me.onBeforeDragStart,me),onStart:Ext.Function.bind(me.onDragStart,me),onDrag:Ext.Function.bind(me.onDrag,me),onEnd:Ext.Function.bind(me.onDragEnd,me),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});me.tracker.initEl(el)},onBeforeDragStart:function(e){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(e){var me=this,slider=me.slider;slider.onDragStart(me,e);me.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");me.dragging=me.slider.dragging=true;me.dragStartValue=me.value;slider.fireEvent("dragstart",slider,e,me)},onDrag:function(e){var me=this,slider=me.slider,index=me.index,newValue=me.getValueFromTracker(),above,below;if(newValue!==undefined){if(me.constrain){above=slider.thumbs[index+1];below=slider.thumbs[index-1];if(below!==undefined&&newValue<=below.value){newValue=below.value}if(above!==undefined&&newValue>=above.value){newValue=above.value}}slider.setValue(index,newValue,false);slider.fireEvent("drag",slider,e,me)}},getValueFromTracker:function(){var slider=this.slider,trackPoint=slider.getTrackpoint(this.tracker.getXY());if(trackPoint!==undefined){return slider.reversePixelValue(trackPoint)}},onDragEnd:function(e){var me=this,slider=me.slider,value=me.value;slider.onDragEnd(me,e);me.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");me.dragging=slider.dragging=false;slider.fireEvent("dragend",slider,e);if(me.dragStartValue!=value){slider.fireEvent("changecomplete",slider,value,me)}},destroy:function(){Ext.destroy(this.tracker)}});
Ext.define("Ext.Editor",{extend:"Ext.container.Container",alias:"widget.editor",requires:["Ext.layout.container.Editor"],layout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,focusOnToFront:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var me=this,field=me.field=Ext.ComponentManager.create(me.field,"textfield");Ext.apply(field,{inEditor:true,msgTarget:field.msgTarget=="title"?"title":"qtip"});me.mon(field,{scope:me,blur:me.onFieldBlur,specialkey:me.onSpecialKey});if(field.grow){me.mon(field,"autosize",me.onFieldAutosize,me,{delay:1})}me.floating={constrain:me.constrain};me.items=field;me.callParent(arguments);me.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onFieldAutosize:function(){this.updateLayout()},afterRender:function(ct,position){var me=this,field=me.field,inputEl=field.inputEl;me.callParent(arguments);if(inputEl){inputEl.dom.name="";if(me.swallowKeys){inputEl.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(field,event){var me=this,key=event.getKey(),complete=me.completeOnEnter&&key==event.ENTER,cancel=me.cancelOnEsc&&key==event.ESC;if(complete||cancel){event.stopEvent();Ext.defer(function(){if(complete){me.completeEdit()}else{me.cancelEdit()}if(field.triggerBlur){field.triggerBlur(event)}},10)}me.fireEvent("specialkey",me,field,event)},startEdit:function(el,value){var me=this,field=me.field;me.completeEdit();me.boundEl=Ext.get(el);value=Ext.isDefined(value)?value:Ext.String.trim(me.boundEl.dom.innerText||me.boundEl.dom.innerHTML);if(!me.rendered){if(me.ownerCt){me.parentEl=me.ownerCt.el;me.parentEl.position()}me.render(me.parentEl||document.body)}if(me.fireEvent("beforestartedit",me,me.boundEl,value)!==false){me.startValue=value;me.show();field.suspendEvents();field.reset();field.setValue(value);field.resumeEvents();me.realign(true);field.focus();if(field.autoSize){field.autoSize()}me.editing=true}},realign:function(autoSize){var me=this;if(autoSize===true){me.updateLayout()}me.alignTo(me.boundEl,me.alignment,me.offsets)},completeEdit:function(remainVisible){var me=this,field=me.field,value;if(!me.editing){return}if(field.assertValue){field.assertValue()}value=me.getValue();if(!field.isValid()){if(me.revertInvalid!==false){me.cancelEdit(remainVisible)}return}if(String(value)===String(me.startValue)&&me.ignoreNoChange){me.hideEdit(remainVisible);return}if(me.fireEvent("beforecomplete",me,value,me.startValue)!==false){value=me.getValue();if(me.updateEl&&me.boundEl){me.boundEl.update(value)}me.hideEdit(remainVisible);me.fireEvent("complete",me,value,me.startValue)}},onShow:function(){var me=this;me.callParent(arguments);if(me.hideEl!==false){me.boundEl.hide()}me.fireEvent("startedit",me,me.boundEl,me.startValue)},cancelEdit:function(remainVisible){var me=this,startValue=me.startValue,field=me.field,value;if(me.editing){value=me.getValue();field.suspendEvents();me.setValue(startValue);field.resumeEvents();me.hideEdit(remainVisible);me.fireEvent("canceledit",me,value,startValue)}},hideEdit:function(remainVisible){if(remainVisible!==true){this.editing=false;this.hide()}},onFieldBlur:function(field,e){var me=this,target=Ext.Element.getActiveElement();if(me.allowBlur===true&&me.editing&&me.selectSameEditor!==true){me.completeEdit()}if(Ext.fly(target).isFocusable()||target.getAttribute("tabIndex")){target.focus()}},onHide:function(){var me=this,field=me.field;if(me.editing){me.completeEdit();return}if(field.hasFocus&&field.triggerBlur){field.triggerBlur()}if(field.collapse){field.collapse()}if(me.hideEl!==false){me.boundEl.show()}me.callParent(arguments)},setValue:function(value){this.field.setValue(value)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var me=this;Ext.destroy(me.field);delete me.field;delete me.parentEl;delete me.boundEl;me.callParent(arguments)}});
Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:"Ext.Component",requires:["Ext.draw.Surface","Ext.layout.component.Draw"],enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:true,shrinkWrap:3,autoSize:false,initComponent:function(){this.callParent(arguments);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click","dblclick")},onRender:function(){var me=this,viewBox=me.viewBox,autoSize=me.autoSize,bbox,items,width,height,x,y;me.callParent(arguments);if(me.createSurface()!==false){items=me.surface.items;if(viewBox||autoSize){bbox=items.getBBox();width=bbox.width;height=bbox.height;x=bbox.x;y=bbox.y;if(me.viewBox){me.surface.setViewBox(x,y,width,height)}else{me.autoSizeSurface()}}}},autoSizeSurface:function(){var bbox=this.surface.items.getBBox();this.setSurfaceSize(bbox.width,bbox.height)},setSurfaceSize:function(width,height){this.surface.setSize(width,height);if(this.autoSize){var bbox=this.surface.items.getBBox();this.surface.setViewBox(bbox.x,bbox.y-+Ext.isOpera,width,height)}},createSurface:function(){var me=this,cfg=Ext.applyIf({renderTo:me.el,height:me.height,width:me.width,items:me.items},me.initialConfig),surface;delete cfg.listeners;if(!cfg.gradients){cfg.gradients=me.gradients}surface=Ext.draw.Surface.create(cfg,me.enginePriority);if(!surface){return false}me.surface=surface;function refire(eventName){return function(e){me.fireEvent(eventName,e)}}surface.on({scope:me,mouseup:refire("mouseup"),mousedown:refire("mousedown"),mousemove:refire("mousemove"),mouseenter:refire("mouseenter"),mouseleave:refire("mouseleave"),click:refire("click"),dblclick:refire("dblclick")})},onDestroy:function(){Ext.destroy(this.surface);this.callParent(arguments)}});